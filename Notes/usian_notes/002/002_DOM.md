# 2.7 DOM 

### 7.1æ–‡æ¡£å¯¹è±¡æ¨¡å‹

**DOM**(document object model)  ä½œç”¨  
	é€šè¿‡å¯ç¼–ç¨‹çš„å¯¹è±¡æ¨¡å‹ï¼ŒJavaScript è·å¾—äº†è¶³å¤Ÿçš„èƒ½åŠ›æ¥åˆ›å»ºåŠ¨æ€çš„ HTMLã€‚
	JavaScript èƒ½å¤Ÿæ”¹å˜é¡µé¢ä¸­çš„æ‰€æœ‰ HTML å…ƒç´ 
	JavaScript èƒ½å¤Ÿæ”¹å˜é¡µé¢ä¸­çš„æ‰€æœ‰ HTML å±æ€§
	JavaScript èƒ½å¤Ÿæ”¹å˜é¡µé¢ä¸­çš„æ‰€æœ‰ CSS æ ·å¼
	JavaScript èƒ½å¤Ÿå¯¹é¡µé¢ä¸­çš„æ‰€æœ‰äº‹ä»¶åšå‡ºååº”
	
	é™æ€ï¼šæ²¡æœ‰
	åŠ¨æ€ï¼šæœ‰æ•°æ®äº¤äº’ï¼ˆajaxï¼‰
	
	JavaScriptæ˜¯è®©é™æ€HTMLæ–‡æ¡£â€œåŠ¨èµ·æ¥â€çš„è„šæœ¬ç¨‹åºè¯­è¨€ã€‚
	
	â€œåŠ¨èµ·æ¥â€æœ‰ä¸¤å±‚æ„æ€ï¼š
		å…¶ä¸€ï¼Œè®©é¡µé¢ä¸­çš„æ ‡ç­¾å…ƒç´ èƒ½å¤Ÿå®ç°åŠ¨æ€ã€åŠ¨ç”»
		å…¶äºŒï¼Œèƒ½å¤Ÿå“åº”ç”¨æˆ·çš„æ“ä½œã€å“åº”äº‹ä»¶

###  7.2DOMæ ‘å½¢ç»“æ„

```
document (HTMLDocument)  
|  
| --> html (HTMLHtmlElement)          
	|       
	| --> head (HtmlHeadElement)          
	|       	|          
	|       	| --> title (HtmlTitleElement)          
	|                | --> text: "A super simple title!"          
	|          
	| --> body (HtmlBodyElement)          
	|       |          
	|       | --> h1 (HTMLHeadingElement)          
	|              | --> text: "A super simple web page!"
```




### 7.3èŠ‚ç‚¹ç±»å‹(äº†è§£)

èŠ‚ç‚¹ç±»å‹:æ–‡æ¡£ä¸­çš„å†…å®¹ï¼ŒåŒ…æ‹¬æ ‡ç­¾ã€æ–‡æœ¬ã€æ³¨é‡Šã€æ ‡ç­¾å±æ€§ç­‰
		æ–‡æ¡£èŠ‚ç‚¹ï¼šæ•´ä¸ªæ–‡æ¡£
		å…ƒç´ èŠ‚ç‚¹ï¼šæ¯ä¸ª HTML æ ‡ç­¾
		æ–‡æœ¬èŠ‚ç‚¹ï¼šåŒ…å«åœ¨ HTML å…ƒç´ ä¸­çš„æ–‡æœ¬
		å±æ€§èŠ‚ç‚¹ï¼šæ¯ä¸€ä¸ª HTML å±æ€§
		æ³¨é‡ŠèŠ‚ç‚¹ï¼šæ³¨é‡Š

```
var boxs=document.querySelector("body").childNodes;
for(var i<0;i<boxs.length;i++){
	console.log(boxs[i].nodeType)
}

nodeType å±æ€§è¿”å›èŠ‚ç‚¹çš„ç±»å‹ã€‚nodeType æ˜¯åªè¯»çš„ã€‚
æ¯”è¾ƒé‡è¦çš„èŠ‚ç‚¹ç±»å‹æœ‰ï¼š
å…ƒç´ ç±»å‹	NodeType
å…ƒç´ 		1
å±æ€§		2
æ–‡æœ¬		3
æ³¨é‡Š		8
æ–‡æ¡£		9
```

| æ–¹æ³•      |                   è¯´æ˜                   |
| :-------- | :--------------------------------------: |
| nodeName  |  è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå…¶å†…å®¹æ˜¯ç»™å®šèŠ‚ç‚¹çš„åå­—  |
| nodeType  | è¿”å›ä¸€ä¸ªæ•´æ•°ï¼Œè¿™ä¸ªæ•°å€¼ä»£è¡¨ç»™å®šèŠ‚ç‚¹çš„ç±»å‹ |
| nodeValue |           è¿”å›ç»™å®šèŠ‚ç‚¹çš„å½“å‰å€¼           |

### 7.4èŠ‚ç‚¹å…³ç³»

â€‹		çˆ¶å­å…³ç³» 
â€‹		å…„å¼Ÿå…³ç³» 
â€‹		ç¥–å­™å…³ç³» 
â€‹	èŠ‚ç‚¹æ ‘ä¸­çš„èŠ‚ç‚¹å½¼æ­¤æ‹¥æœ‰å±‚çº§å…³ç³»ã€‚
â€‹		çˆ¶ï¼ˆparentï¼‰ã€å­ï¼ˆchildï¼‰å’ŒåŒèƒï¼ˆsiblingï¼‰ç­‰æœ¯è¯­ç”¨äºæè¿°è¿™äº›å…³ç³»ã€‚
â€‹		çˆ¶èŠ‚ç‚¹æ‹¥æœ‰å­èŠ‚ç‚¹ã€‚åŒçº§çš„å­èŠ‚ç‚¹è¢«ç§°ä¸ºåŒèƒï¼ˆå…„å¼Ÿæˆ–å§å¦¹ï¼‰ã€‚
â€‹		åœ¨èŠ‚ç‚¹æ ‘ä¸­ï¼Œé¡¶ç«¯èŠ‚ç‚¹è¢«ç§°ä¸ºæ ¹ï¼ˆrootï¼‰
â€‹		æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰çˆ¶èŠ‚ç‚¹ã€é™¤äº†æ ¹ï¼ˆå®ƒæ²¡æœ‰çˆ¶èŠ‚ç‚¹ï¼‰
â€‹		ä¸€ä¸ªèŠ‚ç‚¹å¯æ‹¥æœ‰ä»»æ„æ•°é‡çš„å­
â€‹		åŒèƒæ˜¯æ‹¥æœ‰ç›¸åŒçˆ¶èŠ‚ç‚¹çš„èŠ‚ç‚¹

| æ–¹æ³•            |                        è¯´æ˜                        |
| :-------------- | :------------------------------------------------: |
| childNodes      | è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„æœ‰ç»™å®šçš„å…ƒç´ èŠ‚ç‚¹çš„å­èŠ‚ç‚¹æ„æˆ |
| firstChild      |                  è¿”å›ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹                  |
| lastChild       |                 è¿”å›æœ€åä¸€ä¸ªå­èŠ‚ç‚¹                 |
| parentNode      |              è¿”å›ä¸€ä¸ªç»™å®šèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹              |
| nextSibling     |           è¿”å›ä¸€ä¸ªç»™å®šèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå­èŠ‚ç‚¹           |
| previousSibling |           è¿”å›ä¸€ä¸ªç»™å®šèŠ‚ç‚¹çš„ä¸Šä¸€ä¸ªå­èŠ‚ç‚¹           |

### 7.5æ–‡æ¡£å†™å…¥

```js
document.write("<h1>sss</h1>");
document.writeln("<h1>8888</h1>");
```

### 7.6.1æŸ¥æ‰¾å…ƒç´ 6ç§æ–¹æ³•

document.getElementById();è¿”å›å¯¹æ‹¥æœ‰æŒ‡å®š id çš„ç¬¬ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ã€‚

document.querySelector();è¿”å›æ–‡æ¡£ä¸­åŒ¹é…æŒ‡å®šçš„CSSé€‰æ‹©å™¨çš„**ç¬¬ä¸€å…ƒç´ **

document.querySelectorAll();HTML5ä¸­å¼•å…¥çš„æ–°æ–¹æ³•ï¼Œè¿”å›æ–‡æ¡£ä¸­åŒ¹é…çš„CSSé€‰æ‹©å™¨çš„**æ‰€æœ‰å…ƒç´ èŠ‚ç‚¹åˆ—è¡¨**

document.getElementsByTagName();è¿”å›å¸¦æœ‰æŒ‡å®šæ ‡ç­¾åçš„å¯¹è±¡é›†åˆã€‚

document.getElementsByClassName();è¿”å›æ–‡æ¡£ä¸­æ‰€æœ‰æŒ‡å®šç±»åçš„å…ƒç´ é›†åˆï¼Œä½œä¸º NodeList å¯¹è±¡ã€‚

document.getElementsByName();è¿”å›å¸¦æœ‰æŒ‡å®šåç§°çš„å¯¹è±¡é›†åˆã€‚	

```js
// id
var one= document.getElementById("a"); // å¯¹è±¡
console.log(one );
// console.log( typeof one ,one instanceof Object);

//class
var two= document.getElementsByClassName("b"); // ä¼ªæ•°ç»„
console.log(two);
// console.log( Object.prototype.toString.call(two) );

//æ ‡ç­¾
var three= document.getElementsByTagName("div");// ä¼ªæ•°ç»„
console.log(three);
// name
var four= document.getElementsByName("c");// ä¼ªæ•°ç»„
console.log( four );

// æ ¹æ®é€‰æ‹©å™¨ è·å–ä¸€ä¸ª 

var five=document.querySelector("div"); // åªèƒ½è·å¾— ç¬¬ä¸€ä¸ª
console.log(five);

// æ ¹æ®é€‰æ‹©å™¨ è·å–æ‰€æœ‰ [] ä¼ªæ•°ç»„
var six= document.querySelectorAll("#a"); // è·å–æ‰€æœ‰åŒ¹é…çš„å…ƒç´  []ä¼ªæ•°ç»„
console.log(six)
```

â€‹		

### 7.7æ“ä½œå…ƒç´ å†…å®¹5ç§æ–¹æ³•

innerHTML:è®¾ç½®æˆ–è·å–ä½äºå¯¹è±¡èµ·å§‹å’Œç»“æŸæ ‡ç­¾å†…çš„ HTML 
innerText:è®¾ç½®æˆ–è·å–ä½äºå¯¹è±¡èµ·å§‹å’Œç»“æŸæ ‡ç­¾å†…çš„æ–‡æœ¬ 
outerHTML:è®¾ç½®æˆ–è·å–å¯¹è±¡åŠå…¶å†…å®¹çš„HTMLå½¢å¼ 
outerText:è®¾ç½®(åŒ…æ‹¬æ ‡ç­¾)æˆ–è·å–(ä¸åŒ…æ‹¬æ ‡ç­¾)å¯¹è±¡çš„æ–‡æœ¬ 
value:input,select,textarea,checkbox,radioå†…å®¹çš„è·å–å’Œè®¾ç½®

```js
var oneDom=document.getElementById("one");//å¯¹è±¡
            // oneDom.innerHTML ="456";   
            // oneDom.innerHTML="<h1>5555</h1>";

            // oneDom.innerText="5555";
            // oneDom.innerText="<h1>5555</h1>";


            // oneDom.outerHTML="8888";
            // oneDom.outerHTML="<h1>8888</h1>";

            // oneDom.outerText="888"
           // oneDom.outerText="<h1>888</h1>"


var inputDom= document.getElementById("two")
console.log( inputDom.value ); // .value è·å– æˆ–è®¾ç½® è¡¨å•çš„å€¼
inputDom.value=123;
```

æŸ¥æ‰¾å…ƒç´ çš„åŒºåˆ«

```js
         var oneDom=document.getElementById("one");
            oneDom.innerText="å“ˆå“ˆå“ˆå“ˆå“ˆ";
//------
        var boxDom=document.getElementsByTagName("div");
        console.log(boxDom);
        boxDom[0].innerText="å“ˆå“ˆå“ˆ";
//------
        var liDom=document.getElementsByClassName("two");
            // console.log(liDom)
            // liDom[0].innerText="0"
            // liDom[1].innerText="1"
            // liDom[2].innerText="2"
            // liDom[3].innerText="3"

            for(var i=0;i<liDom.length;i++){
                liDom[i].innerText=i;
            }
```

### 7.8æ“ä½œå…ƒç´ çš„è¡Œå†…æ ·å¼

obj.style.property="æ–°æ ·å¼";

â€‹		propertyæŒ‡color;font-size;backgroundç­‰

```js
//<div id="one" >888</div>

var oneDom=document.getElementById("one");

oneDom.style.width="100px";
oneDom.style.height="100px";
oneDom.style.border="1px solid red";
oneDom.style.marginLeft="100px";
```

### 7.9æ“ä½œå…ƒç´ å±æ€§ä¿©ç§æ–¹æ³•

obj.attr="æ–°å±æ€§å€¼";attræŒ‡å±æ€§å,å¦‚src;id;name,value,type,href,rel,type,alt,width,heigthç­‰
obj.å±æ€§å = "æ–°å±æ€§å€¼";
		
obj.hasAttribute()	å¦‚æœå…ƒç´ ä¸­å­˜åœ¨æŒ‡å®šçš„å±æ€§è¿”å› trueï¼Œå¦åˆ™è¿”å›falseã€‚

obj.setAttribute();//è®¾ç½®å±æ€§	(å±æ€§åï¼Œ å±æ€§å€¼1   å±æ€§å€¼2)
obj.getAttribute();//è·å–å±æ€§
obj.removeAttribute();//åˆ é™¤å±æ€§

```js
var imgDom=document.getElementById("one");
// 1ã€å…ƒç´ å¯¹è±¡.å±æ€§å
            // console.log( imgDom.alt)
            // imgDom.alt="888888"

// 2ã€ è·å–ï¼šå…ƒç´ å¯¹è±¡.getAttribute("å±æ€§å") 
//     è®¾ç½®ï¼šå…ƒç´ å¯¹è±¡.setAttribute("å±æ€§å","å€¼")
//     ç§»é™¤ï¼šå…ƒç´ å¯¹è±¡.removeAttribute("å±æ€§å") 
//  æ˜¯å¦å­˜åœ¨ï¼šå…ƒç´ å¯¹è±¡.hasAttribute("å±æ€§å") 

console.log( imgDom.getAttribute("title") );
imgDom.setAttribute("title","8888888888");
imgDom.removeAttribute("class");
console.log( imgDom.hasAttribute("class") );
```



### 7.10  class å±æ€§æ“ä½œ

```js
//<div id="one" class="">222</div>

var boxDom= document.getElementById("one");
// è·å–class å±æ€§ å…ƒç´ å¯¹è±¡.classList
// æ·»åŠ class å±æ€§ å…ƒç´ å¯¹è±¡.classList.add(ç±»å1,ç±»å2)
// ç§»é™¤class å±æ€§ å…ƒç´ å¯¹è±¡.classList.remove(ç±»å1,ç±»å2)
boxDom.classList.add("box","boxText");
//boxDom.classList.remove("box","boxText");
```



### 7.11  jså°†ä¼ªæ•°ç»„å˜æˆçœŸæ•°ç»„çš„ä¸‰ç§æ–¹æ³•

 

jså°†ä¼ªæ•°ç»„å˜æˆçœŸæ•°ç»„çš„ä¸‰ç§æ–¹æ³•

1ã€ [].slice.call(obj) è¿™ä¸ªç­‰äºArray.prototype.slice.call(obj)

```js
var newArr=[].slice.call(obj)
```

2. Array.form(obj),ES6çš„æ–°è¯­æ³•

   ```js
   var newArr=Array.from(obj)
   ```

3. ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦,ä¹Ÿæ˜¯ES6çš„è¯­æ³•

   ```js
   var newArr= [...obj]
   ```

   

### 7.12è·å–å…ƒç´ æ ‡ç­¾å

æ¯”å¦‚é€šè¿‡idè·å–çš„ä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹, æƒ³çŸ¥é“è¿™ä¸ªèŠ‚ç‚¹æ˜¯ä»€ä¹ˆä»€ä¹ˆæ ‡ç­¾, è¿™æ—¶å¯ä»¥é€šè¿‡: **Node.prototype.nodeName**å±æ€§ æˆ– **Element.prototype.tagName**å±æ€§è·å–.

```js
// HTML 
// <div id="app">Hello</div>

document.getElementById("app").tagName;
// "DIV"

document.querySelector("#app").nodeName;
// "DIV"
```

**æ³¨æ„:** tagNameå’ŒnodeNameè¿”å›çš„ç»“æœæ˜¯å®Œå…¨ä¸€æ ·çš„, åªæ˜¯tagNameåœ¨Elementæ¥å£ä¸Š, nodeNameåœ¨Nodeæ¥å£ä¸Š

### 7.13  ç‚¹èµæ¡ˆä¾‹

```html
<button onclick="zan()" id="btn">ğŸ‘0</button>

<script>
var i=0;

function zan(){
      console.log("ç‚¹äº†");
     var btnDom=document.getElementById("btn");
     // document.querySelector("#btn")
    // console.log(btnDom);
    i++;
    btnDom.innerText="ğŸ‘"+ i;
    }
 </script>
```

### 7.14  !!!!æ¡ˆä¾‹   éš”è¡Œå˜è‰²

```html
   <button onclick="opens()">å¼€å¯éš”è¡Œå˜è‰²</button>
    <button onclick="closes()">å…³é—­éš”è¡Œå˜è‰²</button>

    <table border="1">
        <thead>
            <tr>
                <th>å§“å</th>
                <th>å¹´é¾„</th>
            </tr>
        </thead>
        <tbody id="tbody">
            <tr>
                <td>gg</td>
                <td>18</td>
            </tr>

            <tr >
                <td>gg2</td>
                <td>18</td>
            </tr>

            <tr>
                <td>gg3</td>
                <td>18</td>
            </tr>
            <tr >
                <td>gg4</td>
                <td>18</td>
            </tr>
            <tr>
                <td>gg5</td>
                <td>18</td>
            </tr>
            <tr >
                <td>gg6</td>
                <td>18</td>
            </tr>
        </tbody>
    </table>

    <script>
         var trsDom=document.querySelectorAll("#tbody > tr");
         var trsArr=Array.from(trsDom);

        function opens(){
            console.log("ç‚¹å‡»äº† å¼€å¯ æŒ‰é’®");
            //var trsDom=document.querySelectorAll("#tbody > tr");
            //var trsArr=Array.from(trsDom);
            // console.log(trsDom);
            // console.log(trsArr);
            for(var i =0;i<trsArr.length;i++){
                if(i%2!==0){
                    // console.log(i);
                    trsArr[i].classList.add("trs");
                }
            }

        }

        function closes(){
            console.log("ç‚¹å‡»äº† å…³é—­ æŒ‰é’®");
            //var trsDom=document.querySelectorAll("#tbody > tr");
            //var trsArr=Array.from(trsDom);
            // console.log(trsDom);
            // console.log(trsArr);
            for(var i =0;i<trsArr.length;i++){
                if(i%2!==0){
                    // console.log(i);
                    trsArr[i].classList.remove("trs");
                }
            }
        }
    </script>
```

### 7.15  äº‹ä»¶ç»‘å®šçš„ä¸‰ç§ æ–¹æ³•

```js
<button onclick="btn1()" onclick="btnx()">ç‚¹å‡»1</button>
    <button id="btn2">ç‚¹å‡»2</button>
    <button id="btn3">ç‚¹å‡»3</button>

    <script>
//1----------------------        
        function btn1(){
            console.log("ç‚¹å‡»äº†æŒ‰é’®1");
            console.log(this);// 
        }

        // function btnx(){
        //     console.log("ç‚¹å‡»äº†æŒ‰é’®1-x");
        // }
//2--------------------------
        var btn2Dom=document.getElementById("btn2");
            btn2Dom.onclick=function(){
                console.log("ç‚¹å‡»äº†æŒ‰é’®2");
                console.log(this);// 
            }

            // btn2Dom.onclick=function(){
            //     console.log("ç‚¹å‡»äº†æŒ‰é’®2-x");
            // }

//3------------------------------
        var btn3Dom=document.getElementById("btn3");
            // æ·»åŠ äº‹ä»¶ç›‘å¬
            btn3Dom.addEventListener("click",function(){
                console.log("ç‚¹å‡»äº†æŒ‰é’®3")
                console.log(this);// 
            }) 

            // btn3Dom.addEventListener("click",function(){
            //     console.log("ç‚¹å‡»äº†æŒ‰é’®3-x")
            // }) 


            /*
                åŒºåˆ«ï¼š
            ä¸€ã€
                1ã€ç›¸åŒäº‹ä»¶ç±»å‹ ï¼Œåªæ‰§è¡Œ ç¬¬ä¸€ä¸ª
                2ã€ç›¸åŒäº‹ä»¶ç±»å‹ ï¼Œæ‰§è¡Œæœ€åä¸€ä¸ª
                3ã€ç›¸åŒäº‹ä»¶ç±»å‹ ï¼Œéƒ½æ‰§è¡Œ

            äºŒã€ 1ã€this -- window
                2ã€this -- å½“å‰å‘ç”Ÿäº‹ä»¶çš„ dom å¯¹è±¡
                3ã€this -- å½“å‰å‘ç”Ÿäº‹ä»¶çš„ dom å¯¹è±¡


            */
```

### 7.16  this

```js
// this --å‡½æ•°ä¸­æ‰æœ‰- -->å¯¹è±¡
// æ™®é€šå‡½æ•° this æŒ‡å‘ è°ƒç”¨æ—¶çš„å¯¹è±¡ ï¼ˆä¼šå˜ï¼‰-- . å‰é¢æ˜¯è° å°±æ˜¯è° ï½œ  æ²¡æœ‰. === window
// ç®­å¤´å‡½æ•° this æŒ‡å‘ å£°æ˜æ—¶çš„å¯¹è±¡  ï¼ˆä¸å˜ï¼‰


        function a(){
            console.log(this);//
        }

        a();

        // window.a();

        var obj={
            "name":"aaaa",
            "say":function(){
                console.log("hhhhh");
                console.log(this);//
            }
        }
        obj.say();
        
        var x= obj.say;
        x();
```

7.17

# 2.8 

### 8.1èŠ‚ç‚¹å±æ€§

1.childNodes  è¿”å›åŒ…å«è¢«é€‰èŠ‚ç‚¹çš„å­èŠ‚ç‚¹çš„ NodeList

â€‹		å¦‚æœé€‰å®šçš„èŠ‚ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹ï¼Œåˆ™è¯¥å±æ€§è¿”å›ä¸åŒ…å«èŠ‚ç‚¹çš„ NodeListã€‚

â€‹		å¦‚éœ€å¾ªç¯å­èŠ‚ç‚¹åˆ—è¡¨ï¼Œä½¿ç”¨ nextSibling å±æ€§ï¼Œè¦æ¯”ä½¿ç”¨çˆ¶å¯¹è±¡çš„ childNodes åˆ—è¡¨æ•ˆç‡æ›´é«˜ã€‚

2.firstChild 	è¿”å›è¢«é€‰èŠ‚ç‚¹çš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹,å¦‚æœé€‰å®šçš„èŠ‚ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹ï¼Œåˆ™è¯¥å±æ€§è¿”å› NULLã€‚ 

â€‹			è·å–æŒ‡å®šå…ƒç´ çš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œå¯ä»¥æ˜¯å…ƒç´ èŠ‚ç‚¹ï¼Œä¹Ÿå¯ä»¥æ˜¯æ–‡æœ¬èŠ‚ç‚¹ã€‚

3.lastChild 	å¯è¿”å›æ–‡æ¡£çš„æœ€åä¸€ä¸ªå­èŠ‚ç‚¹ã€‚

4.ownerDocument å¯è¿”å›æŸå…ƒç´ çš„æ ¹å…ƒç´ ã€‚

5.parentNode 	å¯è¿”å›æŸèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ã€‚å¦‚æœæŒ‡å®šçš„èŠ‚ç‚¹æ²¡æœ‰çˆ¶èŠ‚ç‚¹åˆ™è¿”å› nullã€‚

6.previousSibling å¯è¿”å›æŸèŠ‚ç‚¹ä¹‹å‰ç´§è·Ÿçš„èŠ‚ç‚¹ï¼ˆå¤„äºåŒä¸€æ ‘å±‚çº§ï¼‰

â€‹		è¿”å›èŠ‚ç‚¹ä»¥èŠ‚ç‚¹å¯¹è±¡è¿”å›ã€‚æ³¨æ„ï¼šå¦‚æœæ²¡æœ‰æ­¤èŠ‚ç‚¹ï¼Œé‚£ä¹ˆè¯¥å±æ€§è¿”å› nullã€‚

7.nextSibling 	 å¯è¿”å›æŸä¸ªå…ƒç´ ä¹‹åç´§è·Ÿçš„èŠ‚ç‚¹ï¼ˆå¤„äºåŒä¸€æ ‘å±‚çº§ä¸­ï¼‰ã€‚

â€‹		è¿”å›èŠ‚ç‚¹ä»¥èŠ‚ç‚¹å¯¹è±¡è¿”å›ã€‚æ³¨æ„ï¼š å¦‚æœå…ƒç´ ç´§è·Ÿåé¢æ²¡æœ‰èŠ‚ç‚¹åˆ™è¿”å› null.

```html
<ul id="ul">
        <li>11</li>
        <li>22</li>
        <li id="a">33</li>
        <li>44</li>
    </ul>
```

```js
var ulDom=document.getElementById("ul");
     console.log("ulçš„æ‰€æœ‰å­èŠ‚ç‚¹-å…ƒç´ +æ–‡æœ¬",ulDom.childNodes);
     console.log("ulçš„æ‰€æœ‰å­å…ƒç´ èŠ‚ç‚¹", ulDom.children)
     console.log("ulä¸‹ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹",ulDom.firstChild);
     console.log("ulä¸‹ç¬¬ä¸€ä¸ªå­å…ƒç´ èŠ‚ç‚¹",ulDom.firstElementChild)
     console.log("ulä¸‹æœ€åä¸€ä¸ªå­èŠ‚ç‚¹",ulDom.lastChild);
     console.log("ulä¸‹æœ€åä¸€ä¸ªå­å…ƒç´ èŠ‚ç‚¹",ulDom.lastElementChild)
     console.log("-----------------------")
     var aLiDom= document.getElementById("a");
     console.log("ä¸Šä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹",aLiDom.previousSibling);
     console.log("ä¸Šä¸€ä¸ªå…„å¼Ÿå…ƒç´  èŠ‚ç‚¹",aLiDom.previousElementSibling)
     console.log("ä¸‹ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹",aLiDom.nextSibling);
     console.log("ä¸‹ä¸€ä¸ªå…„å¼Ÿå…ƒç´  èŠ‚ç‚¹",aLiDom.nextElementSibling)
     console.log("çˆ¶èŠ‚ç‚¹",aLiDom.parentNode );
     console.log("çˆ¶èŠ‚ç‚¹",aLiDom.parentElement );
```



### 8.2å…ƒç´ å±æ€§

1.children  å±æ€§è¿”å›å…ƒç´ çš„å­å…ƒç´ çš„é›†åˆï¼Œæ˜¯ä¸€ä¸ª HTMLCollection å¯¹è±¡ã€‚åªè¿”å›å…ƒç´ èŠ‚ç‚¹

2.parentElement 	å¯è¿”å›æŸèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ã€‚å¦‚æœæŒ‡å®šçš„èŠ‚ç‚¹æ²¡æœ‰çˆ¶èŠ‚ç‚¹åˆ™è¿”å› null ã€‚

3.firstElementChild è¿”å›è¢«é€‰èŠ‚ç‚¹çš„ç¬¬ä¸€ä¸ªå­å…ƒç´ èŠ‚ç‚¹,å¦‚æœé€‰å®šçš„èŠ‚ç‚¹æ²¡æœ‰å­å…ƒç´ èŠ‚ç‚¹ï¼Œåˆ™è¯¥å±æ€§è¿”å› NULLã€‚è·å–æŒ‡å®šå…ƒç´ çš„ç¬¬ä¸€ä¸ªå­å…ƒç´ èŠ‚ç‚¹ï¼Œä¸ä¼šæ£€æµ‹åˆ°æ–‡æœ¬èŠ‚ç‚¹ã€‚

4.lastElementChild  è¿”å›è¢«é€‰èŠ‚ç‚¹çš„æœ€åä¸€ä¸ªå­å…ƒç´ èŠ‚ç‚¹,å¦‚æœé€‰å®šçš„èŠ‚ç‚¹æ²¡æœ‰å­å…ƒç´ èŠ‚ç‚¹ï¼Œåˆ™è¯¥å±æ€§è¿”å› NULLã€‚

5.previousElementNode å¯è¿”å›æŸèŠ‚ç‚¹ä¹‹åç´§è·Ÿçš„å…ƒç´ èŠ‚ç‚¹ï¼ˆå¤„äºåŒä¸€æ ‘å±‚çº§ï¼‰æ³¨æ„ï¼šå¦‚æœæ²¡æœ‰æ­¤å…ƒç´ èŠ‚ç‚¹ï¼Œé‚£ä¹ˆè¯¥å±æ€§è¿”å› nullã€‚

6.nextElementNode  å¯è¿”å›æŸèŠ‚ç‚¹ä¹‹å‰ç´§è·Ÿçš„å…ƒç´ èŠ‚ç‚¹ï¼ˆå¤„äºåŒä¸€æ ‘å±‚çº§ï¼‰æ³¨æ„ï¼šå¦‚æœæ²¡æœ‰æ­¤å…ƒç´ èŠ‚ç‚¹ï¼Œé‚£ä¹ˆè¯¥å±æ€§è¿”å› nullã€‚



### 8.3èŠ‚ç‚¹æ“ä½œæ–¹æ³• 

| æ–¹æ³•                           |                          è¯´æ˜                          |
| :----------------------------- | :----------------------------------------------------: |
| createElement(element)         |                    åˆ›å»ºä¸€ä¸ªæ–°çš„èŠ‚ç‚¹                    |
| createTextNode()               |           åˆ›å»ºä¸€ä¸ªåŒ…å«ç€ç»™å®šæ–‡æœ¬çš„æ–°æ–‡æœ¬èŠ‚ç‚¹           |
| appendChild()                  |   æŒ‡å®šèŠ‚ç‚¹çš„æœ€åä¸€ä¸ªå­èŠ‚ç‚¹åˆ—è¡¨ä¹‹åæ·»åŠ ä¸€ä¸ªæ–°çš„å­èŠ‚ç‚¹   |
| çˆ¶èŠ‚ç‚¹.append() å¯ä»¥ä¼ å…¥å¤šä¸ª   |                                                        |
| insertBefore()                 | å°†ä¸€ä¸ªç»™å®šèŠ‚ç‚¹æ’å…¥åˆ°ä¸€ä¸ªç»™å®šå…ƒç´ èŠ‚ç‚¹çš„ç»™å®šå­èŠ‚ç‚¹çš„å‰é¢ |
| removeChild(è¦åˆ é™¤çš„å…ƒç´ )      |             ä»ä¸€ä¸ªç»™å®šå…ƒç´ ä¸­åˆ é™¤ä¸€ä¸ªå­èŠ‚ç‚¹             |
| replaceChild(æ–°èŠ‚ç‚¹ï¼Œè€èŠ‚ç‚¹)   |    æŠŠä¸€ä¸ªç»™å®šçˆ¶å…ƒç´ é‡Œçš„ä¸€ä¸ªå­èŠ‚ç‚¹æ›¿æ¢ä¸ºå¦å¤–ä¸€ä¸ªèŠ‚ç‚¹    |
| è‡ªèº«èŠ‚ç‚¹.remove() å°†æœ¬èº«ç§»é™¤æ‰ |                                                        |



#### 8.3.1åˆ›å»º

â€‹	document.createElement()é€šè¿‡æŒ‡å®šåç§°åˆ›å»ºä¸€ä¸ªå…ƒç´ 
â€‹	document.createTextNode()å¯åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹ã€‚

```js
var h1Dom= document.createElement("h1");
        console.log("åˆ›å»ºå…ƒç´ èŠ‚ç‚¹",h1Dom);

var textDom=document.createTextNode("h1");
        console.log("åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹",textDom);
```



#### 8.3.2æ·»åŠ 

â€‹	çˆ¶èŠ‚ç‚¹.appendChild() èŠ‚ç‚¹çš„å­èŠ‚ç‚¹åˆ—è¡¨çš„æœ«å°¾æ·»åŠ æ–°çš„å­èŠ‚ç‚¹ã€‚

   çˆ¶èŠ‚ç‚¹.append() å¯ä»¥ä¼ å…¥å¤šä¸ª

â€‹	çˆ¶èŠ‚ç‚¹.insertBefore(æ’å…¥çš„æ–°èŠ‚ç‚¹ï¼ŒåŸèŠ‚ç‚¹)   åœ¨å·²æœ‰çš„å­èŠ‚ç‚¹å‰æ’å…¥ä¸€ä¸ªæ–°çš„å­èŠ‚ç‚¹

```html
<div id="box">
    <h1>123</h1>
</div>
```

```js
// åˆ›å»º h2 å…ƒç´ æ ‡ç­¾ å¯¹è±¡
var h2Dom=document.createElement("h2");
    h2Dom.innerText=456;

// åˆ›å»º h3 å…ƒç´ æ ‡ç­¾ å¯¹è±¡ 
var h3Dom=document.createElement("h3");
    h3Dom.innerText=789;

// è·å–div -çˆ¶å…ƒç´ 
var boxDom=document.getElementById("box");

// çˆ¶å…ƒç´ .appendChild(å­å…ƒç´ ) åœ¨çˆ¶å…ƒç´ å†…éƒ¨ æœ«å°¾ è¿½åŠ ä¸€ä¸ªèŠ‚ç‚¹
boxDom.appendChild(h2Dom);
boxDom.appendChild(h3Dom);

// åœ¨çˆ¶å…ƒç´ å†…éƒ¨ æœ«å°¾ è¿½åŠ å¤šä¸ªèŠ‚ç‚¹
// boxDom.append(h2Dom,h3Dom)
```

```js
// åœ¨çˆ¶å…ƒç´  å†…éƒ¨ æŸä¸ªå…ƒç´  ä¹‹å‰æ·»åŠ 
// çˆ¶å…ƒç´ .insertBefore(æ–°å…ƒç´ ï¼Œç›®æ ‡å…ƒç´ )

// åœ¨ div å†…éƒ¨ h1 ä¹‹å‰ æ·»åŠ  <p>å“ˆå“ˆå“ˆå“ˆ</p>
// 1ã€åˆ›å»º p 
var pDom=document.createElement("p");
// 2ã€p çš„å†…å®¹ 
    pDom.innerText="å“ˆå“ˆå“ˆå“ˆ";
    pDom.style.color="red";
// 3ã€ è·å–div
var divDom=document.getElementById("box");
// 4ã€è·å–h1
var h1Dom= divDom.firstElementChild;
// 5ã€å°† p æ·»åŠ åˆ° divå†… h1ä¹‹å‰
divDom.insertBefore( pDom,h1Dom ); 
```



#### 8.3.3æ›¿æ¢

â€‹	çˆ¶èŠ‚ç‚¹.replaceChild(æ–°èŠ‚ç‚¹ï¼Œè€èŠ‚ç‚¹) 

```html
<div id="box">
    <h1 id="h1">123</h1>
</div>
```

â€‹	

```js
// å°† h1 æ ‡ç­¾ æ›¿æ¢ä¸º p æ ‡ç­¾

//1ã€ åˆ›å»ºpæ ‡ç­¾
var pDom=document.createElement("p");
//2ã€ pæ ‡ç­¾å†…å®¹ == h1 å†…å®¹
//2-1ã€è·å– h1 æ ‡ç­¾
var h1Dom=document.getElementById("h1");
//2-2ã€è·å– h1 çš„å†…å®¹
var h1Text=h1Dom.innerText;
//2-3ã€pæ ‡ç­¾å†…å®¹ = h1 å†…å®¹
pDom.innerText= h1Text;

//3ã€æ›¿æ¢ çˆ¶å…ƒç´ .replaceChild(æ–°èŠ‚ç‚¹ï¼Œè€èŠ‚ç‚¹) 	
//3-1ã€è·å– çˆ¶å…ƒç´  div
var divDom=document.getElementById("box");
    divDom.replaceChild(pDom,h1Dom);
```



#### 8.3.4åˆ é™¤

â€‹	çˆ¶èŠ‚ç‚¹.removeChild(è¦åˆ é™¤çš„å…ƒç´ )	 æ–¹æ³•å¯ä»çˆ¶èŠ‚ç‚¹ä¸‹çš„å­èŠ‚ç‚¹åˆ—è¡¨ä¸­åˆ é™¤æŸä¸ªèŠ‚ç‚¹

â€‹	è‡ªèº«èŠ‚ç‚¹.remove() å°†æœ¬èº«ç§»é™¤æ‰

```html
<div id="box">
    <h1 id="h1">123</h1>
    <h2 id="h2">456</h2>
</div>
```

```js
//ä¸€ ã€çˆ¶èŠ‚ç‚¹.removeChild(è¦åˆ é™¤çš„å…ƒç´ )	

// 1ã€è·å–  çˆ¶èŠ‚ç‚¹ div
var divDom=document.getElementById("box");
// 2ã€è·å–  è¦åˆ é™¤çš„å…ƒç´ 
var h1Dom=document.getElementById("h1");
// 3ã€åˆ é™¤
divDom.removeChild(h1Dom)
```

```js
// äºŒã€è‡ªèº«èŠ‚ç‚¹.remove() å°†æœ¬èº«ç§»é™¤æ‰

// 1ã€è·å–  è¦åˆ é™¤çš„å…ƒç´ 
var h2Dom=document.getElementById("h2");
// 2ã€åˆ é™¤
h2Dom.remove();
```



#### 8.3.5å…‹éš†

DOM1.cloneNode(boolean) : å¤åˆ¶ä¸€ä¸ªèŠ‚ç‚¹
trueï¼šæ·±å¤åˆ¶ï¼Œå¤åˆ¶èŠ‚ç‚¹åŠå…¶æ•´ä¸ªå­èŠ‚ç‚¹æ ‘
false : æµ…å¤åˆ¶ï¼Œåªå¤åˆ¶èŠ‚ç‚¹æœ¬èº«ã€‚é»˜è®¤æ˜¯false

```html
<div id="box">
    <h1 id="h1">123</h1>
</div>
```

```js
// å…‹éš† h1 -- æ·»åŠ åˆ° box å†…éƒ¨æœ«å°¾
// 1ã€è·å– h1
var h1Dom=document.getElementById("h1");
// 2ã€å…‹éš† DOM1.cloneNode(boolean) 
// trueï¼šæ·±å¤åˆ¶ï¼Œå¤åˆ¶èŠ‚ç‚¹åŠå…¶æ•´ä¸ªå­èŠ‚ç‚¹æ ‘
// false : æµ…å¤åˆ¶ï¼Œåªå¤åˆ¶èŠ‚ç‚¹æœ¬èº«ã€‚é»˜è®¤æ˜¯false
var ch1Dom=h1Dom.cloneNode(true);
// console.log(ch1Dom)
//3ã€å°† å…‹éš† å¾—åˆ°çš„å…ƒç´  æ”¾å…¥ box å†…éƒ¨æœ«å°¾
//3-1ã€è·å– box
var divDom=document.getElementById("box");
//3-2ã€çˆ¶èŠ‚ç‚¹.appendChild(å…‹éš†å¾—åˆ°çš„å…ƒç´ )
    divDom.appendChild(ch1Dom);
```

### 8.3.6    !!!!æ¡ˆä¾‹--åœ¨ä¸€ä¸ªæ–‡æœ¬æ¡†åˆ›å»ºè¾“å…¥ä¸ªæ•°çš„æŒ‰é’®

```html
<style>
        #btnBox{
            width: 500px;
            height: 500px;
            border: 1px solid red;
        }
    </style>
</head>
<body>
   
    <div id="box">
        <span>åˆ›å»º</span>
            <input type="text" id="num" autofocus>
        <span>ä¸ª æŒ‰é’®</span>
        <button id="start">å¼€å§‹åˆ›å»º</button>
    </div>

    <div id="btnBox">
  </div>
```

```js
// 1ã€è·å– å¼€å§‹åˆ›å»ºæŒ‰é’®
var startDom=document.getElementById("start")
// 2ã€ç»™ å¼€å§‹åˆ›å»ºæŒ‰é’® ç»‘å®š ç‚¹å‡»äº‹ä»¶
    startDom.onclick=function(){
        // ---- æ¸…ç©º div
        var btnBoxDom=document.getElementById("btnBox");
        btnBoxDom.innerText=""
         // 3ã€äº‹ä»¶å†… è·å– input æ¡†è¾“å…¥çš„ å€¼
        var inputDom=document.getElementById("num");
        //  è½¬æ•°å­—ç±»å‹
        var num= parseInt( inputDom.value );
        // åˆ¤æ–­è¾“å…¥çš„æ˜¯ä¸æ˜¯æ•°å­—
        if(num){
            console.log("è¾“å…¥çš„æ˜¯æ•°å­—",num);
            // 4ã€åˆ›å»º num ä¸ª button
            for(var i=0;i<num;i++){
                // åˆ›å»ºçš„button æŒ‰é’®
                var btnDom=document.createElement("button");
                    btnDom.innerText= "æŒ‰é’®" + (i+1);
                    // console.log(btnDom);
             
                // 5ã€åˆ†åˆ« æ·»åŠ åˆ° id="btnbox" çš„div ä¸­
                // var btnBoxDom=document.getElementById("btnBox");
                btnBoxDom.appendChild(btnDom);
            }
             
        }else{
            alert("å¿…é¡»è¾“å…¥æ•°å­—");
            inputDom.value=""; //æ¸…ç©ºè¾“å…¥æ¡†
            inputDom.focus(); // inputæ¡†è·å¾—é¼ æ ‡ç„¦ç‚¹
        }
        
           
    }
```



### 8.4  åç§»é‡

å…ƒç´ çš„å¯è§å¤§å°ç”±å…¶é«˜åº¦ã€å®½åº¦å†³å®šï¼ŒåŒ…æ‹¬æ‰€æœ‰å†…è¾¹è·ã€æ»šåŠ¨æ¡å’Œè¾¹æ¡†çš„å¤§å°ï¼ˆæ³¨æ„ï¼Œä¸åŒ…æ‹¬å¤–è¾¹è·ï¼‰ã€‚

**offsetHeight**ï¼šå…ƒç´ åœ¨å‚ç›´æ–¹å‘ä¸Šå ç”¨çš„ç©ºé—´å¤§å°ï¼Œä»¥åƒç´ è®¡ã€‚

â€‹		åŒ…æ‹¬å…ƒç´ çš„é«˜åº¦ã€æ°´å¹³æ»šåŠ¨æ¡çš„é«˜åº¦ã€ä¸Šè¾¹æ¡†é«˜åº¦å’Œä¸‹è¾¹æ¡†çš„é«˜åº¦ã€‚

**offsetWidth**ï¼šå…ƒç´ åœ¨æ°´å¹³æ–¹å‘ä¸Šå ç”¨çš„ç©ºé—´å¤§å°ï¼Œä»¥åƒç´ è®¡ã€‚

â€‹		åŒ…æ‹¬å…ƒç´ çš„å®½åº¦ã€å‚ç›´æ»šåŠ¨æ¡çš„å®½åº¦ã€å·¦è¾¹æ¡†å®½åº¦å’Œå³è¾¹æ¡†å®½åº¦ã€‚

**offsetLeft**ï¼šå…ƒç´ çš„å·¦å¤–è¾¹æ¡†è‡³åŒ…å«å…ƒç´ çš„å·¦å†…è¾¹æ¡†ä¹‹é—´çš„åƒç´ è·ç¦»ã€‚

**offsetTop**ï¼šå…ƒç´ çš„ä¸Šå¤–è¾¹æ¡†è‡³åŒ…å«å…ƒç´ çš„ä¸Šå†…è¾¹æ¡†ä¹‹é—´çš„åƒç´ è·ç¦»ã€‚

```html
<style>
        *{
            margin: 0;
            padding: 0;
        }
        #box{
            width: 200px;
            height: 100px;
            border: 1px solid black;
            padding: 10px;
            margin: 100px;
        }
    </style>
</head>
<body>
    <div id="box">1</div>
```

```js
var divDom=document.getElementById("box");
console.log("å·¦è¾¹æ¡†--> bodyå·¦è¾¹è·ç¦»",divDom.offsetLeft);
console.log("ä¸Šè¾¹æ¡†--> bodyä¸Šè¾¹è·ç¦»",divDom.offsetTop);
console.log("å†…å®¹+å†…è¾¹è·+è¾¹æ¡† æ°´å¹³æ–¹å‘ä¸Šå ç”¨çš„ç©ºé—´å¤§å°",divDom.offsetWidth);
console.log("å†…å®¹+å†…è¾¹è·+è¾¹æ¡†  å‚ç›´æ–¹å‘ä¸Šå ç”¨çš„ç©ºé—´å¤§å°",divDom.offsetHeight);
```



### 8.5.å®¢æˆ·/å¯è§†åŒºå¤§å°

å…ƒç´ çš„å®¢æˆ·åŒºå¤§å°æŒ‡çš„æ˜¯å…ƒç´ å†…å®¹åŠå…¶å†…è¾¹è·æ‰€å æ®çš„ç©ºé—´å¤§å°ã€‚

**clientWidth**ï¼šå…ƒç´ å†…å®¹åŒºå®½åº¦åŠ ä¸Šå·¦å³å†…è¾¹è·å®½åº¦ã€‚

**clientHeight**ï¼šå…ƒç´ å†…å®¹åŒºé«˜åº¦åŠ ä¸Šä¸Šä¸‹å†…è¾¹è·é«˜åº¦ã€‚

```html
<style>
        *{
            margin: 0;
            padding: 0;
        }

        #box{ 
            width: 200px;
            height: 100px;
            border: 3px solid black;
            padding: 10px;
            margin: 100px;
        }

    </style>
</head>
<body>
    <div id="box">1</div>
```

```js
var divDom= document.getElementById("box");
console.log("div å†…å®¹+å†…è¾¹è· å®½",divDom.clientWidth );
console.log("div å†…å®¹+å†…è¾¹è· é«˜",divDom.clientHeight)
console.log( "body å¯è§†åŒºåŸŸ å®½",document.documentElement.clientWidth );
console.log( "body å¯è§†åŒºåŸŸ é«˜",document.documentElement.clientHeight );
```



### 8.6 .æ»šåŠ¨å¤§å°

**scrollHeight**ï¼šåœ¨æ²¡æœ‰æ»šåŠ¨æ¡çš„æƒ…å†µä¸‹ï¼Œå…ƒç´ å†…å®¹çš„æ€»é«˜åº¦ã€‚ï¼ˆåŒ…æ‹¬éšè—çš„é«˜åº¦ï¼‰

**scrollWidth**ï¼šåœ¨æ²¡æœ‰æ»šåŠ¨æ¡çš„æƒ…å†µä¸‹ï¼Œå…ƒç´ å†…å®¹çš„æ€»å®½åº¦ã€‚ï¼ˆåŒ…æ‹¬éšè—çš„å®½åº¦ï¼‰

**scrollLeft**ï¼šè¢«éšè—åœ¨å†…å®¹åŒºåŸŸå·¦ä¾§çš„åƒç´ æ•°ã€‚

**scrollTop**ï¼šè¢«éšè—åœ¨å†…å®¹åŒºåŸŸä¸Šæ–¹çš„åƒç´ æ•°ã€‚

å› æ­¤ï¼Œå¸¦æœ‰å‚ç›´æ»šåŠ¨æ¡çš„é¡µé¢çš„æ€»é«˜åº¦å°±æ˜¯document.documentElement.scrollHeightã€‚

å¯¹äºä¸åŒ…å«æ»šåŠ¨æ¡çš„é¡µé¢è€Œè¨€ï¼ŒscrollWidthå’ŒscrollHeightä¸clientWidthå’ŒclientHeightä¹‹é—´çš„å…³ç³»å¹¶ä¸ååˆ†æ¸…æ™°ï¼Œæµè§ˆå™¨ä¹‹é—´çš„å·®å¼‚å¾ˆå¤§ã€‚

Firefoxä¸­è¿™ä¸¤ç»„å±æ€§å§‹ç»ˆéƒ½æ˜¯ç›¸ç­‰çš„ï¼Œéƒ½ä»£è¡¨æ–‡æ¡£å†…å®¹åŒºåŸŸå°ºå¯¸ï¼Œè€Œéè§†å£å°ºå¯¸ï¼›

Operaã€Safari 3.1åŠæ›´é«˜ç‰ˆæœ¬ã€Chromeä¸­è¿™ä¸¤ç»„å±æ€§æ˜¯æœ‰å·®åˆ«çš„ï¼Œå…¶ä¸­scrollWidthå’ŒscrollHeightç­‰äºè§†å£å¤§å°ï¼Œè€ŒclientWidthå’ŒclientHeightç­‰äºæ–‡æ¡£å†…å®¹åŒºåŸŸå¤§å°ï¼›

IE(æ ‡å‡†æ¨¡å¼)ä¸­ï¼ŒscrollWidthå’ŒscrollHeightç­‰äºæ–‡æ¡£å†…å®¹åŒºåŸŸå¤§å°ï¼Œè€ŒclientWidthå’ŒclientHeightç­‰äºè§†å£å¤§å°ã€‚

å› æ­¤åœ¨ç¡®å®šæ–‡æ¡£çš„æ€»é«˜åº¦æ—¶ï¼Œå–ä¸¤ä¸ªå€¼çš„æœ€å¤§å€¼ã€‚

scrollTopå’ŒscrollLeftæ˜¯å¯ä»¥è®¾ç½®çš„ã€‚

```html
<style>
        *{
            margin: 0;
            padding: 0;
        }
        .one{
            height: 300px;
            border: 1px solid red;
            text-align: center;
            line-height: 300px;
        }
     
    </style>
</head>
<body>
    <div class="one">1</div>
    <div class="one">2</div>
    <div class="one">3</div>
    <div class="one">4</div>
    <div class="one" id="x">5</div>
```

```js
var xDom=document.getElementById("x");
//æ»šåŠ¨äº‹ä»¶
window.onscroll=function(){
    console.log(document.documentElement.scrollTop);// è¢«éšè— çš„ å†…å®¹é«˜åº¦ -- å·èµ·çš„å†…å®¹é«˜åº¦
}
```

### 8.7  !!!æ¡ˆä¾‹-----å›åˆ°é¡¶éƒ¨

```html
<style>
        *{
            margin: 0;
            padding: 0;
        }
        .one{
            height: 200px;
            border: 1px solid red;
            text-align: center;
            line-height: 300px;
            background: violet;
        }
        /* å›åˆ°é¡¶éƒ¨å°ç›’å­çš„å±æ€§è®¾ç½® */
        #backTop{
            width: 80px;
            height: 80px;
            background: red;
            text-align: center;
            line-height: 80px;
            color: white;
            position:fixed;
            bottom: 50px;
            right: 0;
            display: none;
        }
     
    </style>
</head>
<body>
    <div class="one">1</div>
    <div class="one">2</div>
    <div class="one">3</div>
    <div class="one">4</div>
    <div class="one">5</div>
    <div class="one">6</div>
    <div class="one">7</div>

    <div id="backTop" >å›åˆ°é¡¶éƒ¨</div>
```

```js
var backTopDom=document.getElementById("backTop");

// æ»šåŠ¨æ—¶ å‡ºç° å›åˆ°é¡¶éƒ¨ div
window.onscroll=function(){
    var sTop=document.documentElement.scrollTop;
    if(sTop > 50){
        backTopDom.style.display ="block";
    }else{
        backTopDom.style.display ="none";
    }

// ç‚¹å‡» å›åˆ°é¡¶éƒ¨æ—¶  scrollTop=0; 
backTopDom.onclick=function(){
    document.documentElement.scrollTop=0; 
}
}
```

### 8.8  å›¾ç‰‡æ‡’åŠ è½½

```html
    <style>
        .img{
            width: 200px;
            height: 200px;
            display: block;
            margin: 0 auto;
        }
    </style>
</head>
<body>
    <div>
<img src="./img/loading.gif"  lazy-src="./img/1.jpg" class="img">
<!-- <img src="./img/1.jpg" class="img"> -->
<img src="./img/loading.gif"  lazy-src="./img/2.jpg" class="img">
<img src="./img/loading.gif"  lazy-src="./img/3.jpg" class="img">
<img src="./img/loading.gif"  lazy-src="./img/4.jpg" class="img">
<img src="./img/loading.gif"  lazy-src="./img/5.jpg" class="img">
<img src="./img/loading.gif"  lazy-src="./img/6.jpg" class="img">
<img src="./img/loading.gif"  lazy-src="./img/7.jpg" class="img">
<img src="./img/loading.gif"  lazy-src="./img/8.gif" class="img">
<img src="./img/loading.gif"  lazy-src="./img/9.jpg" class="img">
<img src="./img/loading.gif"  lazy-src="./img/10.jpg" class="img">
<img src="./img/loading.gif"  lazy-src="./img/11.jpg" class="img">
<img src="./img/loading.gif"  lazy-src="./img/12.jpg" class="img">
<img src="./img/loading.gif"  lazy-src="./img/13.jpg" class="img">
<img src="./img/loading.gif"  lazy-src="./img/14.jpg" class="img">
<img src="./img/loading.gif"  lazy-src="./img/15.jpg" class="img">
<img src="./img/loading.gif"  lazy-src="./img/16.jpg" class="img">
<img src="./img/loading.gif"  lazy-src="./img/17.jpg" class="img">

    </div>
```

```js
// æ€ä¹ˆåˆ¤æ–­ å›¾ç‰‡è¿›å…¥ å¯è§†åŒºåŸŸ 
// å›¾ç‰‡.offsetTop <  ï¼ˆå¯è§†åŒºåŸŸé«˜åº¦ + æ»šåŠ¨å·èµ·çš„é«˜åº¦ï¼‰
function lazy(){
    var imgDom=document.querySelectorAll(".img");
    var h=document.documentElement.clientHeight;
    var s=document.documentElement.scrollTop
    for(var i =0;i<imgDom.length;i++){
        // å›¾ç‰‡.offsetTop <  ï¼ˆå¯è§†åŒºåŸŸé«˜åº¦ + æ»šåŠ¨å·èµ·çš„é«˜åº¦ï¼‰
        if(imgDom[i].offsetTop < ( s+ h ) ){
            var lazySrc= imgDom[i].getAttribute("lazy-src");
            // console.log(lazySrc)
                imgDom[i].setAttribute("src",lazySrc);
        }
    }
}
window.onload=function(){
    lazy()
}
window.onscroll=function(){
   lazy()
}
```

# 2.9 

### 9.1  äº‹ä»¶å§”æ‰˜

```html
<ul id="ul">
    <li>11</li>
    <li>22</li>
    <li>33</li>
    <li>44</li>
    <li>55</li>
    <li>66</li>
    <li>77</li>
    <li>88</li>
    <h1>å“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆ</h1>
</ul>
```

```js
/*
    var liDom=document.querySelectorAll("li");
    console.log(liDom)
    for(var i=0;i<liDom.length;i++){
        liDom[i].onclick=function(){
            console.log( this.innerText )
        }
    }
*/
var ulDom= document.getElementById("ul")
    ulDom.onclick=function(e){
        // å‘ç”Ÿäº‹ä»¶ å…ƒç´ çš„äº‹ä»¶å¯¹è±¡
        // e.target  å‘ç”Ÿäº‹ä»¶çš„å…ƒç´  <li> ... </li>
        // console.log( e.target.tagName )
        if( e.target.tagName == "LI"){
            console.log(e.target.innerText);
        }
       
    }
```

### 9.2 !!!æ¡ˆä¾‹ å­¦ç”Ÿç®¡ç†ç³»ç»Ÿ  

###### æ–¹æ³•1   æ–¹æ³•2

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
       .table{
            border-collapse: collapse;
            width: 500px;
            text-align: center;
       }
       .table td ,.table th{
        border: 1px solid #000;
       }
       
    </style>
</head>
<body>
    <form >
        <div>
            <label for="name">å§“å</label>
            <input type="text" id="name">
        </div>

        <div>
            <label for="age">å¹´é¾„</label>
            <input type="text" id="age">
        </div>

        <div>
            <label style="visibility: hidden;">æ·»åŠ  </label>
            <input type="button" value="æ·»åŠ " id="addBtn">
           
        </div>
    </form>

    <table class="table" >
        <thead>
            <tr>
                <th>å§“å</th>
                <th>å¹´é¾„</th>
                <th>æ“ä½œ</th>
            </tr>
        </thead>
        <tbody id="tbody">
            <tr>
                <td>11</td>
                <td>13</td>
                <td>
                    <button>åˆ é™¤</button>
                </td>
            </tr>
            <!-- <tr>
                <th colspan="3">æš‚æ— æ•°æ®</th>
            </tr> -->
        </tbody>
    </table>

    <script src="./01.js"></script>
</body>
</html>
```

```js
// ä¸€ã€ç‚¹å‡» æ·»åŠ æŒ‰é’® è·å– å§“åã€å¹´é¾„ æ‰“å°åˆ°æ§åˆ¶å°

// äºŒã€è¾“å…¥æ¡†ä¸èƒ½ä¸ºç©º

// ä¸‰ã€ åˆ›å»ºtr ï¼Œ td 

// ---------------è·å–æ·»åŠ  æŒ‰é’® ç»‘å®šç‚¹å‡»äº‹ä»¶
var addBtnDom=document.getElementById("addBtn");
//æ·»åŠ 
    addBtnDom.onclick=function(){

        // è·å– å§“åã€å¹´é¾„ 
        var nameDom= document.querySelector("#name");
        var ageDom= document.querySelector("#age");

        var nameVal= nameDom.value;
        var ageVal = ageDom.value;

        //console.log(nameVal,ageVal)

        if(nameVal == "" || ageVal ==""){
            console.log("ä¸èƒ½ä¸ºç©º");
        }else{
            console.log(nameVal,ageVal)
        }

        if(nameVal && ageVal){
            console.log("æœ‰å€¼",nameVal,ageVal);
            // åˆ›å»ºtr 
            var trDom=document.createElement("tr");
            // åˆ›å»º td -å§“å
            var td1Dom=document.createElement("td");
                td1Dom.innerText=nameVal;
            // åˆ›å»º td -å¹´é¾„
            var td2Dom=document.createElement("td");
                td2Dom.innerText=ageVal;
            //  åˆ›å»º td -åˆ é™¤æŒ‰é’®
            var td3Dom=document.createElement("td");
            //  åˆ›å»º button åˆ é™¤æŒ‰é’®
            var btnDom=document.createElement("button");
                btnDom.innerText="åˆ é™¤"
// åˆ é™¤ åŠ¨æ€æ·»åŠ çš„ tr
                btnDom.onclick=function(){
                    // console.log(this)
                    this.parentNode.parentNode.remove();    
                }
        //  å°† åˆ é™¤æŒ‰é’® æ·»åŠ éƒ½ td 
            td3Dom.appendChild(btnDom);
        //  å°† æ‰€æœ‰td æ·»åŠ åˆ° tr
        trDom.append(td1Dom,td2Dom,td3Dom);
        // å°†tr æ·»åŠ åˆ°tbody
        var tbodyDom=document.getElementById("tbody");
            tbodyDom.appendChild(trDom);
        }else{
            console.log("ä¸èƒ½ä¸ºç©º")
        }
        nameDom.value="";
        ageDom.value="";
    }
//åˆ é™¤ é»˜è®¤å·²ç»æœ‰çš„ tr
var btnDom=document.getElementsByTagName("button");
// console.log(btnDom)
for(var i =0;i<btnDom.length;i++){
    btnDom[i].onclick=function(){
        this.parentNode.parentNode.remove()
    }
}
```

###### æ–¹æ³•2

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
       .table{
            border-collapse: collapse;
            width: 500px;
            text-align: center;
       }
       .table td ,.table th{
        border: 1px solid #000;
       }
       
    </style>
</head>
<body>
    <form >
        <div>
            <label for="name">å§“å</label>
            <input type="text" id="name">
        </div>

        <div>
            <label for="age">å¹´é¾„</label>
            <input type="text" id="age">
        </div>

        <div>
            <label style="visibility: hidden;">æ·»åŠ  </label>
            <input type="button" value="æ·»åŠ " id="addBtn">
           
        </div>
    </form>

    <table class="table" >
        <thead>
            <tr>
                <th>å§“å</th>
                <th>å¹´é¾„</th>
                <th>æ“ä½œ</th>
            </tr>
        </thead>
        <tbody id="tbody">
            <!-- <tr>
                <td>11</td>
                <td>13</td>
                <td>
                    <button>åˆ é™¤</button>
                </td>
            </tr> -->
            <!-- <tr>
                <th colspan="3">æš‚æ— æ•°æ®</th>
            </tr> -->
        </tbody>
    </table>

    <script src="./02.js"></script>
</body>
</html>
```



```js
// --------------------------------
//1ã€å¸ƒå±€ 

// 2ã€åˆå§‹æ¸²æŸ“ 
// 2-1ã€æ¨¡æ‹Ÿé»˜è®¤æ•°æ®
var arr=[
    {"id":1,"name":"11","age":13},
    {"id":2,"name":"22","age":14},
    {"id":3,"name":"33","age":15}
]

// 2-2ã€æ¸²æŸ“

function show(arr){
    var str="";
    for(var i=0;i<arr.length;i++){
        str+=`
        <tr>
            <td>${ arr[i].name }</td>
            <td>${ arr[i].age}</td>
            <td>
                <button onclick="del(${i})">åˆ é™¤</button>
            </td>
        </tr>
        `
    }
    // console.log(str);
    document.getElementById("tbody").innerHTML= str;
}
show(arr);

//åˆ é™¤
function del(i){
    arr.splice(i,1);
    show(arr);
}

// 3ã€äº‹ä»¶
var addBtnDom=document.getElementById("addBtn");
    addBtnDom.onclick=function(){
        var nameDom=document.getElementById("name");
        var ageDom=document.getElementById("age");

        var nameVal=nameDom.value;
        var ageVal=ageDom.value;

        // console.log(nameVal, ageVal);
        if( nameVal && ageVal ){
            
            arr.push( {"id":new Date().getTime(),"name":nameVal,"age":ageVal} )
            // console.log(arr);
            show(arr);
        }else{
            alert("ä¸èƒ½ä¸ºç©º");
        }
    }
```

```js
    //å°è£… setCookie(å±æ€§å,å±æ€§å€¼,å¤±æ•ˆæ—¶é—´)
    function setCookie(key,value,time){
        var d=new Date();
        d.setTime( d.getTime() + time*60*1000 ) ;
        document.cookie =`${key}=${value};expires=${d.toGMTString()}`
    }
    setCookie("name","é«˜",2);
    setCookie("age",18,2);
    
   //å°è£… getCookie(å±æ€§å)  
   function getCookie(key){
        var c= document.cookie;//name=é«˜; namexx=18
        var arr= c.split(";");
        var index=  arr.findIndex(function(v){
                return v.includes(key+"=")
            })
        return  index >=0 ?  arr[index].split("=")[1] : "";
   }

   //   getCookie("age")
   console.log(  getCookie("name") );
```

### 9.2cookie

```js
// è®¾ç½®
var d= new Date(); //è·å–å½“å‰æ—¥æœŸå¯¹è±¡  d.getTime()  è·å–æ—¶é—´æˆ³ 1970åˆ°ç°åœ¨çš„æ¯«ç§’
d.setTime( d.getTime() + 10*1000 );// ä¿©åˆ†é’Ÿ
document.cookie="user=gao; expires="+ d.toGMTString()
// è·å–
console.log(document.cookie);
```

### 9.3  è®¾ç½®cookie

```js
    //å°è£… setCookie(å±æ€§å,å±æ€§å€¼,å¤±æ•ˆæ—¶é—´)
    function setCookie(key,value,time){
        var d=new Date();
        d.setTime( d.getTime() + time*60*1000 ) ;
        document.cookie =`${key}=${value};expires=${d.toGMTString()}`
    }
    setCookie("name","é«˜",2);
    setCookie("age",18,2);
    
   //å°è£… getCookie(å±æ€§å)  
   function getCookie(key){
        var c= document.cookie;//name=é«˜; namexx=18
        var arr= c.split(";");
        var index=  arr.findIndex(function(v){
                return v.includes(key+"=")
            })
        return  index >=0 ?  arr[index].split("=")[1] : "";
   }

   //   getCookie("age")
   console.log(  getCookie("name") );
```

### 9.4  localStorage

æŒä¹…åŒ–å­˜å‚¨,5Må·¦å³,ä¸ä¸»åŠ¨åˆ é™¤,ä¸€ç›´å­˜åœ¨(å†å²è®°å½•)

è®¾ç½®:  setItem(key,value),å…¶ä¸­valueå¿…é¡»ä¸ºå­—ç¬¦ä¸²

è·å–:  getItem(key)

```js
// è®¾ç½® 
localStorage.setItem("x","å•Šå•Šå•Šå•Šå•Šå•Šå•Šå•Š")

localStorage.setItem("y","aaaaa")

//è·å–
console.log(  localStorage.getItem("x") ) 

// åˆ é™¤
// localStorage.removeItem("x");

// æ¸…ç©º
// localStorage.clear();
sessionStorage.setItem("aaaa","yyyyyy")
```

### 9.5  json  

```js
var obj={"name":"aa","age":13};
var str= JSON.stringify( obj )
console.log( str );

var obj2= JSON.parse(str);
console.log( obj2 );


// JSON å¯¹è±¡ -- è½¬ä¸º JSON å­—ç¬¦ä¸²
// JSON.stringify()

// JSON å­—ç¬¦ä¸² -- è½¬ä¸º JSON å¯¹è±¡
// JSON.parse()

// localStorage.setItem("user",JSON.stringify( obj ) )

// console.log(  JSON.parse(  localStorage.getItem("user") )  )
```

### 9.6  æ¡ˆä¾‹--æ¸²æŸ“

```html
<input type="text" id="todo">
<button id="add">æ·»åŠ </button>
<ul id="ul">
    <!-- <li>22</li>
    <li>33</li>
    <li>44</li> -->
</ul>
```

```js
  //1ã€å¸ƒå±€
  //2ã€æ¸²æŸ“
  //2-1ã€æ¨¡æ‹Ÿé»˜è®¤æ•°
  //     ---  è·å– æœ¬åœ°å‚¨å­˜ ?å¦‚æœæœ‰ è½¬JSONå¯¹è±¡ å–å€¼ :å¦‚æœæ²¡æœ‰ []
  var arr = localStorage.getItem("anli") ? JSON.parse(localStorage.getItem("anli")).zhi : []
  //2-2ã€å¾ªç¯æ•°ç»„ æ‹¼æ¥ æ¨¡ç‰ˆå­—ç¬¦ä¸² - æ·»åŠ dom
  function show() {
      var str = ""
      for (var i = 0; i < arr.length; i++) {
          str += `
          <li>${arr[i]}</li>
      `
      }
      console.log(str);
      document.getElementById("ul").innerHTML = str;
   }
  show()
  //3ã€äº‹ä»¶
  var addDom = document.getElementById("add");
  addDom.onclick = function () {
      var inputDom = document.getElementById("todo");
      var inputVal = inputDom.value;
      // console.log(inputVal);
      arr.push(inputVal);
      // 1-------
      var obj = {
          "zhi": arr
      };
      localStorage.setItem("anli", JSON.stringify(obj));
      show()
  }
```

# 2.10  

### 10.1æ¡ˆä¾‹  è¡¨å•å…ƒç´ ( å•é€‰-æ–‡æœ¬- å¤šé€‰-ä¸‹æ‹‰-æ–‡æœ¬åŸŸ)

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <form >
        <div>     
            <label for="">å§“å:</label>
            <input type="text" name="" id="user">
        </div>

        <div>
            <label for="">æ€§åˆ«:</label>
           <span>ç”·</span> <input type="radio" name="sex"  value="ç”·" checked>
           <span>å¥³</span> <input type="radio" name="sex"  value="å¥³">
        </div>

        <div>
            <label for="">ç±è´¯:</label>
            <select name="" id="address">
                <option value="é™•è¥¿">é™•è¥¿çœ</option>
                <option value="å±±è¥¿">å±±è¥¿çœ</option>
                <option value="æ²³å—">æ²³å—çœ</option>
                <option value="æ²³åŒ—">æ²³åŒ—çœ</option>
            </select>
        </div>

        <div>
            <label for="">çˆ±å¥½:</label>
            <span>çœ‹ä»£ç </span> <input type="checkbox" name="hobby"  value="çœ‹ä»£ç ">
            <span>æŠ„ä»£ç </span> <input type="checkbox" name="hobby"  value="æŠ„ä»£ç ">
            <span>å†™ä»£ç </span> <input type="checkbox" name="hobby"  value="å†™ä»£ç ">

        </div>  
        
        <div>
            <label for="">ä»‹ç»:</label>
            <textarea name="" id="msg" cols="30" rows="10"></textarea>
        </div>
        <div>
            <input type="button" value="æäº¤" id="add">
        </div>

    </form>


    <script src="./06.js"></script>
</body>
</html>
```

```js
var class2103 = [];


// ç»‘å®šç‚¹å‡»äº‹ä»¶
var addDom = document.getElementById("add");
addDom.onclick = function () {
    // å§“å åŸºç¡€
    var userDom = document.getElementById("user");
    var user = userDom.value;
    // console.log("å§“å",user);

    // æ€§åˆ« å•é€‰
    var sexDom = document.getElementsByName("sex");
    var sex;
    for (var i = 0; i < sexDom.length; i++) {
        if (sexDom[i].checked == true) {
            sex = sexDom[i].value
        }
    }
    // console.log("æ€§åˆ«",sex);

    // ç±è´¯  ä¸‹æ‹‰
    var addressDom = document.getElementById("address");
    var address = addressDom.value;
    // console.log("ç±è´¯",address);

    // çˆ±å¥½  å¤é€‰

    var hobbyDom = document.getElementsByName("hobby");
    var hobby = [];
    for (var i = 0; i < hobbyDom.length; i++) {
        if (hobbyDom[i].checked == true) {
            hobby.push(hobbyDom[i].value)
        }
    }
    // console.log("çˆ±å¥½",hobby);

    // ä»‹ç»  æ–‡æœ¬åŸŸ
    var msgDom = document.getElementById("msg");
    var msg = msgDom.value;
    // console.log("è‡ªæˆ‘ä»‹ç»",msg);


    // éç©ºéªŒè¯
    if (user && sex && address && hobby.length > 0 && msg) {
        // console.log('è¾“å…¥æ­£ç¡®');
        var obj = {
            "user": user,
            "sex": sex,
            "address": address,
            "hobby": hobby,
            "msg": msg
        }
        //  console.log(obj);
        class2103.push(obj);

        console.log(class2103);

    } else {
        console.log("è¾“å…¥é”™è¯¯ï¼Œæœ‰æœªå¡«å†™");
    }


}
```

### 10.2  æ¡ˆä¾‹  æ˜¾ç¤ºä¸éšè—

```html
<style>
        #editOk {
            display: none;
        }
    </style>
</head>

<body>
    <button id="add">æ·»åŠ </button>
    <button id="editok">ç¡®è®¤ä¿®æ”¹</button>
    <ul>
        <li id="edit">ä¿®æ”¹</li>
    </ul>
```

```js
// ç‚¹å‡» li ä¿®æ”¹ ï¼Œ éšè— æ·»åŠ  æŒ‰é’® ï¼Œå±•ç¤º ç¡®è®¤ä¿®æ”¹
        var editDom = document.getElementById("edit"); // li ä¿®æ”¹ 
        var addDom = document.getElementById("add"); // æ·»åŠ æŒ‰é’®
        var editOkDom = document.getElementById("editOk"); // ç¡®è®¤ä¿®æ”¹
        editDom.onclick = function () {
            addDom.style.display = "none";
            editOkDom.style.display = "block";
        }
        // ç‚¹å‡» ç¡®è®¤ä¿®æ”¹  éšè—è‡ªå·±ï¼Œæ˜¾ç¤º æ·»åŠ æŒ‰é’®
        editOkDom.onclick = function () {
            this.style.display = "none";
            addDom.style.display = "block";

        }
```

### 10.3  æ¸²æŸ“--1

```html
    <div>
        <p>å§“å ï¼š<span id="user">xx</span> </p>
        <p>æ€§åˆ« ï¼š<span id="sex">xx</span> </p>
        <p>å¹´é¾„ ï¼š<span id="age">xx</span> </p>

    </div>

    <script>
        var one = {
            "name": "gao",
            "age": 18,
            "sex": "ç”·"
        }

        var userDom = document.getElementById("user");
        userDom.innerHTML = one.name;

        var sexDom = document.getElementById("sex");
        sexDom.innerHTML = one.sex;

        var ageDom = document.getElementById("age");
        ageDom.innerHTML = one.age;
    </script>
```

### 10.4  æ¸²æŸ“  --2

```html
<style>
        #box>div {
            border: 1px solid black;
            margin-bottom: 5px;
        }
    </style>
</head>

<body>
    <div id="box">
        <!-- <div >
        <p>å§“å ï¼š<span id="user">xx</span> </p> 
        <p>æ€§åˆ« ï¼š<span id="sex">xx</span> </p> 
        <p>å¹´é¾„ ï¼š<span id="age">xx</span> </p> 

    </div> -->

    </div>


    <script>
        var arr = [{
                "name": "gao",
                "age": 18,
                "sex": "ç”·"
            },
            {
                "name": "gao2",
                "age": 182,
                "sex": "ç”·"
            },
            {
                "name": "gao3",
                "age": 183,
                "sex": "ç”·"
            },
        ]

        var str = "";
        for (var i = 0; i < arr.length; i++) {
            str += `
            <div >
                <p>å§“å ï¼š<span id="user">${arr[i].name}</span> </p> 
                <p>æ€§åˆ« ï¼š<span id="sex">${arr[i].sex}</span> </p> 
                <p>å¹´é¾„ ï¼š<span id="age">${arr[i].age}</span> </p> 

            </div> 
            `
        }
        document.getElementById("box").innerHTML = str;
    </script>
```

### 10.5  æ¸²æŸ“å°è£…

```js
    <style>
        #box>div {
            border: 1px solid black;
            margin-bottom: 5px;
        }
    </style>
</head>

<body>
    <div id="box">
        <!-- <div >
        <p>å§“å ï¼š<span id="user">xx</span> </p> 
        <p>æ€§åˆ« ï¼š<span id="sex">xx</span> </p> 
        <p>å¹´é¾„ ï¼š<span id="age">xx</span> </p> 

    </div> -->

    </div>


    <script>
        var arr = [{ "name": "gao","age": 18,"sex": "ç”·"},
            {"name": "gao2","age": 182,"sex": "å¥³"},
            {"name": "gao3","age": 183,"sex": "ç”·"},]

        function show(arr) {
            var str = "";
            for (var i = 0; i < arr.length; i++) {
                str += `
                <div >
                    <p>å§“å ï¼š<span id="user">${arr[i].name}</span> </p> 
                    <p>æ€§åˆ« ï¼š<span id="sex">${arr[i].sex}</span> </p> 
                    <p>å¹´é¾„ ï¼š<span id="age">${arr[i].age}</span> </p> 

                </div> 
                `
            }
            document.getElementById("box").innerHTML = str;
        }
        show(arr);

        // var x = arr.filter(function(value,index){
        //     return value.sex == "ç”·"
        // })
        // // console.log(x);

        // show(x);
    </script>
```

### 10.6  æœç´¢

```js
<style>
        #box>div {
            border: 1px solid black;
            margin-bottom: 5px;
        }
    </style>
</head>

<body>

    <input type="search" placeholder="è¯·è¾“å…¥å§“å" id="sUser"> <button id="search">æœç´¢</button>

    <div id="box">
        <!-- <div >
            <p>å§“å ï¼š<span id="user">xx</span> </p> 
            <p>æ€§åˆ« ï¼š<span id="sex">xx</span> </p> 
            <p>å¹´é¾„ ï¼š<span id="age">xx</span> </p> 
        </div> -->
    </div>
```

```js
<script>
    var arr = [{
            "name": "gao",
            "sex": "ç”·",
            "age": 19,
        },
        {
            "name": "wang",
            "sex": "ç”·",
            "age": 14,
        },
        {
            "name": "li",
            "sex": "å¥³",
            "age": 16,
        },
        {
            "name": "zhao",
            "sex": "ç”·",
            "age": 13,
        },
    ]
    //--------æ¸²æŸ“,æ‹¼æ¥å­—ç¬¦ä¸²æ˜¾ç¤ºåˆ°é¡µé¢-------------
    function show(xx) {
        var str = "";
        for (var i = 0; i < xx.length; i++) {
            str += `
            <div >
                <p>å§“å ï¼š<span id="user">${xx[i].name}</span> </p> 
                <p>æ€§åˆ« ï¼š<span id="sex">${xx[i].sex}</span> </p> 
                <p>å¹´é¾„ ï¼š<span id="age">${xx[i].age}</span> </p> 
            </div>
            `
        }
        document.getElementById("box").innerHTML = str;
    }
    show(arr);
    //-------------è·å–æœç´¢æŒ‰é’®------------
    var searchDom = document.getElementById("search");
    //------------æœç´¢æŒ‰é’®ç»‘å®šç‚¹å‡»äº‹ä»¶-----       
    searchDom.onclick = function () {
        //è·å–æœç´¢è¾“å…¥æ¡†
        var sUserDom = document.getElementById("sUser");
        var sUser = sUserDom.value;
        //æ•°ç»„ç­›é€‰åŠŸèƒ½filter,è¿”å›å¤åˆæ¡ä»¶çš„æ–°æ•°ç»„nArr,
        var nArr = arr.filter(function (value, index) {
            return value.name.includes(sUser)
        })
        show(nArr);
    }
    </script>
```

### 10.7  !!!!æ¡ˆä¾‹  å­¦å‘˜ä¿¡æ¯ç®¡ç†ç³»ç»Ÿ--å¢åˆ æ”¹æŸ¥

```html
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <style>
        .table {
            border-collapse: collapse;
            width: 100%;
            text-align: center;
        }

        .table th,
        table td {
            border: 1px solid black;
        }

        #editOk {
            display: none;
        }
    </style>
</head>

<body>
    <h1>å­¦å‘˜ä¿¡æ¯ç®¡ç†ç³»ç»Ÿ</h1>
    <!-- å½•å…¥ -->
    <form>
        <div>
            <label for="">å§“å:</label>
            <input type="text" name="" id="user">
        </div>

        <div>
            <label for="">æ€§åˆ«:</label>
            <span>ç”·</span> <input type="radio" name="sex" value="ç”·" checked>
            <span>å¥³</span> <input type="radio" name="sex" value="å¥³">
        </div>

        <div>
            <label for="">ç±è´¯:</label>
            <select name="" id="address">
                <option value="é™•è¥¿">é™•è¥¿çœ</option>
                <option value="å±±è¥¿">å±±è¥¿çœ</option>
                <option value="æ²³å—">æ²³å—çœ</option>
                <option value="æ²³åŒ—">æ²³åŒ—çœ</option>
            </select>
        </div>

        <div>
            <label for="">çˆ±å¥½:</label>
            <span>çœ‹ä»£ç </span> <input type="checkbox" name="hobby" value="çœ‹ä»£ç ">
            <span>æŠ„ä»£ç </span> <input type="checkbox" name="hobby" value="æŠ„ä»£ç ">
            <span>å†™ä»£ç </span> <input type="checkbox" name="hobby" value="å†™ä»£ç ">

        </div>

        <div>
            <label for="">ä»‹ç»:</label>
            <textarea name="" id="msg" cols="30" rows="1"></textarea>
        </div>
        <div>
            <input type="button" value="æäº¤" id="add">
            <input type="button" value="ç¡®è®¤ä¿®æ”¹" id="editOk">
        </div>

    </form>
    <hr />
    <!-- å±•ç¤º -->
    <table class="table">
        <thead>
            <tr>
                <th>åºå·</th>
                <th>å§“å</th>

                <th>æ€§åˆ«</th>
                <th>çˆ±å¥½</th>
                <th>ç±è´¯</th>
                <th>ä¸ªäººä»‹ç»</th>
                <th>æ“ä½œ</th>
            </tr>
        </thead>
        <tbody id="tbody">
            <!-- <tr>
                <td>åºå·</td>
                <td>å§“å</td>
                <td>å¹´é¾„</td>
                <td>æ€§åˆ«</td>
                <td>çˆ±å¥½</td>
                <td>ç±è´¯</td>
                <td>ä¸ªäººä»‹ç»</td>
                <td>
                    <button>åˆ é™¤</button>
                    <button>ä¿®æ”¹</button>
                </td>
            </tr> -->
        </tbody>
    </table>

    <script src="./07-curd.js"></script>
</body>

</html>
```

```js
// c create    åˆ›å»º    å¢
// u update    ä¿®æ”¹    æ”¹
// r read      è¯»å–    æŸ¥
// d delete    åˆ é™¤    åˆ 


// 1ã€æ¨¡æ‹Ÿæ•°æ®

// var arr=[
//     // {
//     //     "id":1,
//     //     "user":"gao",
//     //     "sex":"å¥³",
//     //     "hobby":['çœ‹ä»£ç ','å†™ä»£ç '],
//     //     "address":"é™•è¥¿",
//     //     "msg":"äººäººçš†å¯æˆæ‰",
//     // },
// ]


var arr= localStorage.getItem("p20610") ? JSON.parse(localStorage.getItem("p20610")  ).info :[];

// è·å– dom å…ƒç´ 
var addDom=document.getElementById("add");
var editOkDom=document.getElementById("editOk");
var userDom=document.getElementById("user");
var sexDom=document.getElementsByName("sex");
var addressDom=document.getElementById("address");
var hobbyDom=document.getElementsByName("hobby");
var msgDom=document.getElementById("msg");


// 2ã€ æ¸²æŸ“

function show( xx ){
    var str="";
    for(var i=0;i<xx.length;i++){
        str+=`
        <tr>
            <td>${i+1}</td>
            <td>${xx[i].user}</td>
    
            <td>${xx[i].sex}</td>
            <td>${xx[i].hobby.join("-")  }</td>
            <td>${xx[i].address}</td>
            <td>${xx[i].msg}</td>
            <td>
                <button onclick="del(${i})">åˆ é™¤</button>
                <button onclick="edit(${i})">ä¿®æ”¹</button>
            </td>
        </tr>
        `
    }
    document.getElementById("tbody").innerHTML=str;

}
show(arr);


// 3ã€ äº‹ä»¶æ“ä½œ
// æ·»åŠ 
addDom.onclick=function(){
    var user=userDom.value;
    var sex ;
    for(var i =0;i<sexDom.length;i++){
        if(sexDom[i].checked == true){
            sex= sexDom[i].value;
        }
    }
    var address= addressDom.value;
    var hobby=[];
        for(var j=0;j<hobbyDom.length;j++){
            if(hobbyDom[j].checked == true){
                hobby.push( hobbyDom[j].value )
            }
        }
    var msg=msgDom.value;
if(user && sex && hobby.length>0 && address && msg){
    var obj={
        "id":new Date().getTime(),
        "user":user,
        "sex":sex,
        "hobby":hobby,
        "address":address,
        "msg":msg,
    }

    arr.push(obj);

    localStorage.setItem("p20610",JSON.stringify( { "info":arr } ))
    show(arr);
}else{
    alert("ä¸èƒ½ä¸ºç©º");
}

}
// åˆ é™¤
function del(index){
    arr.splice(index,1);
    localStorage.setItem("p20610",JSON.stringify( { "info":arr } ))
    show(arr);
}

// ä¿®æ”¹
var editIndex;

function edit(index){
    editOkDom.style.display="block";
    addDom.style.display="none";

    // i æ˜¯ä¿®æ”¹æ—¶ ä¸‹æ ‡
    // console.log( arr[i] );

    var obj= arr[index];

    userDom.value=obj.user;

    for(var i=0;i<sexDom.length;i++){
        // console.log(sexDom[i].value ,obj.sex)
        if( sexDom[i].value == obj.sex ){
            // console.log("sssss")
            sexDom[i].checked=true;
        }
    }

    addressDom.value=obj.address;

    for(var x=0;x<hobbyDom.length;x++){

        for(var y=0;y<obj.hobby.length;y++){
            if( hobbyDom[x].value == obj.hobby[y] ){
                hobbyDom[x].checked=true;
                break;
            }
        }
    }

    msgDom.value= obj.msg;
    editIndex =index;

}

// ç¡®è®¤ä¿®æ”¹

 editOkDom.onclick=function(){
    editOkDom.style.display="none";
    addDom.style.display="block";

    var user=userDom.value;
    var sex ;
    for(var i =0;i<sexDom.length;i++){
        if(sexDom[i].checked == true){
            sex= sexDom[i].value;
        }
    }
    
    var address= addressDom.value;
    var hobby=[];
        for(var j=0;j<hobbyDom.length;j++){
            if(hobbyDom[j].checked == true){
                hobby.push( hobbyDom[j].value )
            }
        }
    var msg=msgDom.value;
    
    if(user && sex && hobby.length>0 && address && msg){
        var obj={
            "id":new Date().getTime(),
            "user":user,
            "sex":sex,
            "hobby":hobby,
            "address":address,
            "msg":msg,
        }

        arr[editIndex] = obj;
        // console.log(editIndex)

        localStorage.setItem("p20610",JSON.stringify( { "info":arr } ))

        show(arr);

// æ¸…ç©ºè¡¨å•

        userDom.value="";
        msgDom.value="";


    }else{
        alert("ä¸èƒ½ä¸ºç©º"); 

    }
}


```

# 2.11

### 11.1  onload

```js
 window.onload = function () {
     console.log("onload-1");
 }
```

### 11.2  onerror

```js
  function errorFn() {
      console.log("é”™è¯¯");
      // console.log(event)
      event.target.src = "./3.jpg"
  }
```

### 11.3   onresize

```js
  window.onresize = function () {
      console.log("æ”¹å˜å¤§å°äº†");
  }
```

### 11.4  é¼ æ ‡å•å‡»onclick    åŒå‡»ondblclick

```js
  var oneDom = document.getElementById("one");
  oneDom.onclick = function () {
      console.log("one å•å‡»");
  }
  oneDom.ondblclick = function () {
      console.log("one åŒå‡»");
  }
```

### 11.5  é¼ æ ‡äº‹ä»¶  

```js
  var box = document.getElementById("box");
  box.onmousedown = function () {
      console.log("æŒ‰ä¸‹äº†é¼ æ ‡");
  }
  box.onmouseup = function () {
      console.log("é‡Šæ”¾æŒ‰ä¸‹é¼ æ ‡é”®è§¦å‘ -æŠ¬èµ·/æ¾å¼€");
  }
  box.onmouseenter = function () {
      console.log(" é¼ æ ‡ è¿›å…¥ èŠ‚ç‚¹è§¦å‘");
  }
  box.onmouseout = function () {
      console.log(" é¼ æ ‡ ç¦»å¼€ èŠ‚ç‚¹è§¦å‘");
  }
  box.onmousemove = function () {
      console.log(" é¼ æ ‡åœ¨èŠ‚ç‚¹å†…éƒ¨ç§»åŠ¨è§¦å‘");
  }
  box.oncontextmenu = function () {
      console.log(" æ‰“å¼€èœå• =ç‚¹å‡»å³é”®");
  }
  box.onwheel = function (e) {
      console.log("æ»šè½® æ»šåŠ¨", e.wheelDelta);
  }
```

### 11.6  é”®ç›˜äº‹ä»¶

```js
  var userDom = document.getElementById("user");
  userDom.onkeydown = function (e) {
      console.log("æŒ‰ä¸‹", e.keyCode) // æŒ‰é”®éƒ½å¯ä»¥ 
      //keyCode æŒ‰é”®ç  1 --- 49  å›è½¦ --13  åˆ é™¤del--8
      if (e.keyCode == 13) {
          console.log("æŒ‰ä¸‹äº†å›è½¦")
      }
  }
  // userDom.onkeyup=function(){
  //     console.log("æ¾å¼€")
  // }
  userDom.onkeypress = function () {
      console.log("æŒ‰ä¸‹") // æŒ‰ä¸‹æœ‰å€¼çš„é”®è§¦å‘ 
  }
```

### 11.7  è¡¨å•äº‹ä»¶

```js
<form onsubmit="tijiao()" onreset="chongzhi()">
        <input type="text" id="user">
        <input type="submit" value="æäº¤">
        <input type="reset" value="é‡ç½®">
    </form>
    <script>
        function tijiao() {
            console.log("ç‚¹å‡»äº†æäº¤æŒ‰é’®");
        }
        function chongzhi() {
            console.log("ç‚¹å‡»äº†é‡ç½®æŒ‰é’®");
        }
        var userDom = document.getElementById("user");
        userDom.onfocus = function () {
            console.log("onfocus -è·å¾—ç„¦ç‚¹");
        }
        userDom.onblur = function () {
            console.log("onblur--å¤±å»ç„¦ç‚¹");
        }
        userDom.onchange = function () {
            console.log("onchange- è¯¥äº‹ä»¶åœ¨è¡¨å•å…ƒç´ çš„å†…å®¹æ”¹å˜æ—¶è§¦å‘");
        }
        userDom.oninput = function () {
            console.log("oninput --å…ƒç´ è·å–ç”¨æˆ·è¾“å…¥æ—¶è§¦å‘ ")
        }
        userDom.onselect = function () {
            console.log("onselect - ç”¨æˆ·é€‰å–æ–‡æœ¬æ—¶è§¦å‘ ")
        }
```

### 11.8 è§¦å±äº‹ä»¶

```html
<style>
        #box {
            width: 100px;
            height: 100px;
            border: 1px solid black;
        }
    </style>
</head>

<body>
    <div id="box"></div>
    <script>
        var boxDom = document.getElementById("box");
        boxDom.ontouchstart = function () {
            console.log("æ‰‹æŒ‡åˆšæ¥è§¦å±å¹•æ—¶è§¦å‘ ")
        }
        boxDom.ontouchmove = function () {
            console.log("æ‰‹æŒ‡åœ¨å±å¹•ä¸Šç§»åŠ¨æ—¶è§¦å‘  ")
        }
        boxDom.ontouchend = function () {
            console.log("æ‰‹æŒ‡ä»å±å¹•ä¸Šç§»å¼€æ—¶è§¦å‘  ")
        }
    </script>
```

### 11.9  äº‹ä»¶å¯¹è±¡

```js
        function btn() {
            var e = event || window.event;
            console.log(e);
        }
        var btn2Dom = document.getElementById("btn2");
        btn2Dom.onclick = function (event) {
            var e = event || window.event;
            console.log(e);
            console.log(e.target, "å‘ç”Ÿäº‹ä»¶çš„å…ƒç´ ");
            console.log(e.screenX, e.screenY, "è·ç¦»å±å¹•x,y");
            console.log(e.pageX, e.pageY, "è·ç¦»æ–‡æ¡£x,y");
            console.log(e.clientX, e.clientY, "å¯è§†åŒºåŸŸx,y")
        }
```

### 11.10 !!!æ¡ˆä¾‹ todolist  çœ‹ç€åƒæ–‡æœ¬-åŒå‡»å³å¯ç¼–è¾‘

```js
        /* #y{
            display: none;
        } */  //cssæ ·å¼


<span id="x">111111  </span>
<input type="text" id="y">
   //--------------------------
        var xDom=document.getElementById("x");
        var yDom=document.getElementById("y");
        xDom.ondblclick=function(){
            this.style.display="none";
            yDom.style.display="block";
            yDom.value= this.innerText;
            yDom.focus();
        }
        yDom.onblur=function(){
            this.style.display="none";
            xDom.style.display="block";  
            xDom.innerText= yDom.value;
        }
        yDom.onkeydown=function(){
            var e= event || window.event;
            if(e.keyCode == 13){
                this.style.display="none";
                xDom.style.display="block";  
                xDom.innerText= yDom.value;
            }
        }
```

### 11.11  äº‹ä»¶ç»‘å®š

```js
 //1ç¬¬ä¸€ç§äº‹ä»¶ç»‘å®š
  function btn1() {
      console.log("ç‚¹å‡»äº†æŒ‰é’®1");
  }

  // 2ç¬¬äºŒç§äº‹ä»¶ç»‘å®š
  var btn2 = document.getElementById("btn2");
  btn2.onclick = function () {
      console.log("ç‚¹å‡»äº†æŒ‰é’®2");
  }
  btn2.onmouseover = function () {
      console.log("é¼ æ ‡åœ¨æŒ‰é’®ä¸Š");
  }
  // å–æ¶ˆäº‹ä»¶
  btn2.onmouseover = false;

  // 3  -ç¬¬ä¸‰ç§äº‹ä»¶ç»‘å®š
  var btn3 = document.getElementById("btn3");
  btn3.addEventListener("click", function () {
      console.log("ç‚¹å‡»äº†æŒ‰é’®3");
  })
  var fn = function () {
      console.log("é¼ æ ‡åœ¨æŒ‰é’®ä¸Š3");
  }
  btn3.addEventListener("mouseover", fn)

  // 4-å–æ¶ˆäº‹ä»¶
  btn3.removeEventListener("mouseover", fn);
```

### 11.12  é»˜è®¤äº‹ä»¶

```html
    <form action="" onsubmit="fn()">
        <input type="text" name="user">
        <button>æäº¤ </button>
        <input type="submit" value="æäº¤">
    </form>
    <script>
        function fn() {
            var event = event || window.event;
            // é˜»æ­¢é»˜è®¤äº‹ä»¶
            // event.preventDefault();
            event.returnValue = false;
        }
    </script>
```

### 11.13  äº‹ä»¶å†’æ³¡

```html
    <style>
  #box {
      width: 300px;
      height: 100px;
      border: 1px solid black;
      display: flex;
  }

  #item {
      width: 100px;
      height: 100px;
      border: 1px solid red;
      margin-left: 200px;
  }
    </style>
</head>

<body>
    <div id="box" onclick="boxFn()">
        <h1>é«˜</h1>
        <div id="item" onclick="itemFn()">åˆ é™¤</div>
    </div>
    <script>
        function boxFn() {
            console.log("è¿›å…¥èŠå¤©é¡µé¢")
        }

        function itemFn() {
            console.log("åˆ é™¤è”ç³»äºº ")
            var e = event || window.event;
            // é˜»æ­¢äº‹ä»¶ å†’æ³¡
            e.stopPropagation();
        }
    </script>
```

### 11.14  äº‹ä»¶å§”æ‰˜

```html
<style>
#box{
            width: 300px;
            height: 100px;
            border: 1px solid black;
            display:flex;
        }
        #item{
            width: 100px;
            height: 100px; 
            border: 1px solid red;
            margin-left: 200px;
        }
    </style>
</head>
<body>
    <div id="box" onclick="boxFn()">
        <h1>é«˜</h1>
        <div id="item" >åˆ é™¤</div>
    </div>
    <script>
        function boxFn(){
            console.log("è¿›å…¥èŠå¤©é¡µé¢");    
            var e= event||window.event;
            // console.log(e.target);
            if( e.target.id == "item" ){
                console.log("åˆ é™¤è”ç³»äºº");
            }
        }
```

### 11.15  å¾ªç¯å˜é‡

```js
  // å¦‚æœ å¾ªç¯ å˜é‡  æ˜¯ä»¥ var å£°æ˜ ï¼Œé‚£ä¹ˆ ä¼šæš´éœ²å‡ºä¸€ä¸ª å…¨å±€å˜é‡ ï¼Œå…¨å±€å˜é‡çš„å€¼æ˜¯ å¾ªç¯çš„ç»ˆæ­¢æ¡ä»¶
  for (var i = 0; i < 5; i++) {
      setTimeout(function () {
          console.log(i); // æ‰“å°5æ¬¡  
      }, 1000)
  }
  for (var i = 0; i < 5; i++) {
      (function (i) {
          setTimeout(function () {
              console.log(i); // æ‰“å°5æ¬¡  
          }, 1000)
      })(i)
  }
  /*
          for(let i=0;i<5;i++){
              setTimeout(function(){
                  console.log(i); // æ‰“å°5æ¬¡  
              },1000)
          }
  */
```

### 11.15  é—­åŒ…åº”ç”¨ä¹‹tabåˆ‡æ¢

```html
  <ul id="ul">
      <li>111</li>
      <li>222</li>
      <li>333</li>
      <li>444</li>
  </ul>
  <script>
      var lisDom = document.querySelectorAll("#ul>li");
      for (var i = 0; i < lisDom.length; i++) {
          //é—­åŒ…
          (function (i) {
              lisDom[i].onclick = function () {
                  console.log(i);
              }
          })(i)
      }
    </script>
```

### 11.16  tabåˆ‡æ¢-é€‰é¡¹å¡

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        *{
            margin: 0;
            padding: 0;
            list-style: none;
        }
        #ul{
            width: 300px;
            display: flex;
            justify-content: space-around;
            cursor: pointer;
        }
        #ul>li{
            width: 100%;
            text-align: center;
        }
        .active{
            /* color:red */
            background: red;
            color: white;
        }

        #box{
            width: 300px;
            height: 300px;
            border: 1px solid black;
        }

        #box >div{
            display: none;
        }

        #box>.show{
            display: block;
        }
    </style>
</head>
<body>
    <!-- tab åˆ‡æ¢ -->
    <ul id="ul">
        <li >è¯è´¹</li>
        <li class="active">æœºç¥¨</li>
        <li>é…’åº—</li>
    </ul>
    <div id="box">
        <div>æˆ‘æ˜¯ è¯è´¹ çš„å†…å®¹</div>
        <div  class="show">æˆ‘æ˜¯ æœºç¥¨ çš„å†…å®¹</div>
        <div>æˆ‘æ˜¯ é…’åº— çš„å†…å®¹</div>
    </div>
    <script>
        var lisDom=document.querySelectorAll("#ul>li");
        var boxDom=document.querySelectorAll("#box>div");
        for(var  i=0;i<lisDom.length;i++){
            (function(i){           
                lisDom[i].onmouseover=function(){
                    for(var j=0;j<lisDom.length;j++){
                        lisDom[j].classList.remove("active");
                        boxDom[j].classList.remove("show");
                    }
                    this.classList.add("active");
                    boxDom[i].classList.add("show");
                    // console.log(i)
                }
            })(i)
        }
    </script>

</body>
</html>
```

### 11.17  æ¡ˆä¾‹ä½¿ç”¨æ»šè½®æ”¹å˜å›¾ç‰‡å¤§å°

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <img src="./3.jpg" alt="" id="img">
    <script>
        var w=100;
        var h=100;
        var imgDom=document.getElementById("img");
        
        window.onload=function(){
            imgDom.style.width =w +"px";
            imgDom.style.height=h +"px";
        }
        imgDom.onwheel=function(){
            var e=event || window.event;
            // console.log( e.wheelDelta)
            if(e.wheelDelta >0 && w >100){
                imgDom.style.width = --w +"px"; 
                imgDom.style.height= --h +"px";
            }else{
                imgDom.style.width = ++w +"px"; 
                imgDom.style.height= ++h +"px";
            }
        }
    </script>
</body>
</html>
```



# 2.12

###  12.1    !!!!!æ¡ˆä¾‹(abåˆ‡æ¢åŠå¢-åˆ -æ”¹-æŸ¥-æ¨¡æ€æ¡†--æ¡ˆä¾‹

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        *{
            margin: 0;
            padding: 0;
            list-style: none;
        }
        .box{
            height: 100vh;
            display: flex;
        }
        .left{
            width: 15vw;
            border: 1px solid black;
        }

        .ul{
            width: 100%;

        }
        .ul >li{
            text-align: center;
            background: coral;
            margin-bottom: 5px;
            line-height: 50px;
            cursor: pointer;
        }
        .ul>.li_active{
            background: pink;
            color: white;
        }
        .right{
            width: 85vw;
        }
        .tab_box >div{
            display: none;
           
        }
        .tab_box >.show{
            display: block;
        }

        .table{
            border-collapse: collapse;
            width: 100%;
            text-align: center;
        }

        .table th,.table td{
            border: 1px solid black;
        }
       #tbody  img{
            width: 50px;
            height: 50px;
        }

        #model{
            width: 100vw;
            height: 100vh;
            position: absolute;
            left: 0;
            top:0;
            background: rgba(0,0,0,0.6);
            display: none;
        }
        #item{
            width: 30vw;
            height: 30vh;
            position: absolute;
            left: 50%;
            top:50%;
            transform: translate(-50%,-50%);
            background: white; 
            text-align: center;
            line-height: 35px;
        }
        #editOk,#editNo{
            width: 45px;
            height: 30px;
            font-size: 12px;
            background:skyblue;
        }
    </style>
</head>
<body>
    <div class="box">
        <div class="left">
            <ul class="ul" id="tab">
                <li >æ·»åŠ </li>
                <li class="li_active">å±•ç¤º</li>
            </ul>
        </div>
        <div class="right">
            <div class="tab_box" id="tab_box">
                <div >
                    <h1>æ·»åŠ é¡µé¢</h1>
                    <form >
                        <div>
                            <label for="name">å•†å“å:</label>
                            <input type="text" id="name">
                        </div>
                        <div>
                            <label for="img">å›¾ç‰‡å:</label>
                            <input type="text" id="img">
                        </div>
                        <div>
                            <label for="price">ä»·&emsp;æ ¼:</label>
                            <input type="text" id="price">
                        </div>
                        <div>
                            <label for="num">æ•°&emsp;é‡:</label>
                            <input type="text" id="num">
                        </div>
                        <div>
                                <input type="button" value="æ·»åŠ " id="add">
                            <!-- <input type="submit" value="æ·»åŠ " > -->
                        </div>
                    </form>
                </div>

                <div class="show">
                    <h1>å±•ç¤ºé¡µé¢</h1>

                    <input type="search" id="search" onkeydown="searchFn()">
                    <hr />
                    <table class="table">
                        <thead>
                            <tr>
                                <th>åºå·</th>
                                <th>å•†å“å</th>
                                <th>å›¾ç‰‡</th>
                                <th>ä»·æ ¼</th>
                                <th>æ•°é‡</th>
                                <th>å°è®¡</th>
                                <th>æ“ä½œ</th>
                            </tr>
                        </thead>
                        <tbody id="tbody">
                             <!-- <tr>
                                <td>1</td>
                                <td>è‹¹æœ</td>
                                <td>
                                    <img src="./img/3.jpg" alt="">
                                </td>
                                <td>10</td>
                                <td>
                                    <button>+</button>
                                    <input type="text" value="1">
                                    <button>-</button>
                                </td>
                                <td>
                                    10
                                </td>
                                <td>
                                    <button>åˆ é™¤</button>
                                    <button>ä¿®æ”¹</button>

                                </td>
                            </tr> -->
                        </tbody>
                    </table>
                </div>

            </div>

        </div>
    </div>

    <!-- æ¨¡æ€æ¡† -->
    <div id="model">
        <div id="item">
            <form >
                <div>
                    <label for="name">å•†å“å:</label>
                    <input type="text" id="ename">
                </div>
                <div>
                    <label for="img">å›¾ç‰‡å:</label>
                    <input type="text" id="eimg">
                </div>
                <div>
                    <label for="price">ä»·&emsp;æ ¼:</label>
                    <input type="text" id="eprice">
                </div>
                <div>
                    <label for="num">æ•°&emsp;é‡:</label>
                    <input type="text" id="enum">
                </div>
                <div>
                        <input type="button" value="ä¿®æ”¹" id="editOk">
                        <input type="button" value="å–æ¶ˆ" id="editNo">

                    <!-- <input type="submit" value="æ·»åŠ " > -->
                </div>
            </form>
        </div>
    </div>

    <script src="./01.js"></script>
</body>
</html>
```

```js
var lisDom= document.querySelectorAll("#tab>li");
var divDom= document.querySelectorAll("#tab_box>div");

for(let i=0;i<lisDom.length;i++){
    lisDom[i].onclick=function(){
        // console.log("ç‚¹å‡»äº†");
        // console.log("iæ˜¯--ä¸‹æ ‡",i);
        // console.log("this",this);

        for(var j=0;j<lisDom.length;j++){
            lisDom[j].classList.remove("li_active");
            divDom[j].classList.remove("show");
        }

        lisDom[i].classList.add("li_active");
        divDom[i].classList.add("show");
    }
}

// å±•ç¤º 

//1ã€æ¨¡æ‹Ÿæ•°æ®
// var arr=[
//     {
//         "id":11,
//         "name":"çœ¯çœ¯çŒ«",
//         "img":"./img/1.jpg",
//         "price":10000,
//         "num":2
//     },
//     {
//         "id":22,
//         "name":"æ­ªå¤´çŒ«",
//         "img":"./img/2.jpg",
//         "price":20000,
//         "num":3
//     },
//     {
//         "id":33,
//         "name":"å¤§è„¸çŒ«",
//         "img":"./img/3.jpg",
//         "price":30000,
//         "num":4
//     }
// ]
var arr= localStorage.getItem("p20615") ? JSON.parse( localStorage.getItem("p20615") ).info :[]
// æ¸²æŸ“
function showTable(res){
    var str="";
    for(var i=0;i<res.length;i++){
        str+=`
        <tr>
            <td>${i+1}</td>
            <td>${res[i].name}</td>
            <td>
                <img src="${res[i].img}"  alt="">
            </td>
            <td>${res[i].price}</td>
            <td>
                <button onclick="jia(${res[i].id})">+</button>
                <input type="text" value="${res[i].num}" oninput="changeNum(${res[i].id})">
                <button onclick="jian(${res[i].id})">-</button>
            </td>
            <td>
            ${res[i].price * res[i].num}
            </td>
            <td>
                <button onclick="del(${res[i].id})">åˆ é™¤</button>
                <button onclick="edit(${res[i].id})">ä¿®æ”¹</button>
            </td>
        </tr>
        `
    }
    document.getElementById("tbody").innerHTML=str;
}

//åˆ é™¤
function del(id){
    var flag= confirm("ç¡®è®¤åˆ é™¤å—");
    if(flag){
          // console.log(id);
            var index= arr.findIndex(function(value){
                return value.id == id
            })
            arr.splice(index,1);
            localStorage.setItem("p20615",JSON.stringify( {"info":arr} ))
            showTable(arr);
    }
 
}
// åŠ 
function jia(id){
    var index= arr.findIndex(function(value){
        return value.id == id
    })

    arr[index].num +=1;
    localStorage.setItem("p20615",JSON.stringify( {"info":arr} ))
    showTable(arr);

}
// å‡
function jian(id){
    var index= arr.findIndex(function(value){
        return value.id == id
    })
    if( arr[index].num >1 ){
        arr[index].num -=1;
        localStorage.setItem("p20615",JSON.stringify( {"info":arr} ))
        showTable(arr);
    }else{
        // console.log("sss")
        arr.splice(index,1);
        localStorage.setItem("p20615",JSON.stringify( {"info":arr} ))
        showTable(arr);
    }   

}

// ä¿®æ”¹æ•°é‡
function changeNum(id){
    console.log(id);
    var e= event||window.event;
    // console.log( e.target.value );
    var index= arr.findIndex(function(value){
        return value.id == id
    })

    arr[index].num =e.target.value ;
    localStorage.setItem("p20615",JSON.stringify( {"info":arr} ))
    showTable(arr);

}

window.onload=function(){
    showTable(arr);
}

// æ·»åŠ 

// 1ã€ ç‚¹å‡»äº‹ä»¶
var addBtn=document.getElementById("add");
    addBtn.onclick=function(){
        var nameDom=document.getElementById("name");
        var imgDom=document.getElementById("img");
        var priceDom=document.getElementById("price");
        var numDom=document.getElementById("num");

        var name= nameDom.value;
        var img= imgDom.value;
        var price= Number(priceDom.value);
        var num=  Number( numDom.value);
        // console.log(name,img,price,num)
        if(name && img && price &&num){

        arr.push({
            "id":new Date().getTime(),
            "name":name,
            "img":`./img/${img}.jpg`,
            "price":price,
            "num":num
        })

        for(var i=0;i<lisDom.length;i++){
            lisDom[i].classList.remove("li_active");
            divDom[i].classList.remove("show");

        }
        lisDom[1].classList.add("li_active");
        divDom[1].classList.add("show");
        localStorage.setItem("p20615",JSON.stringify( {"info":arr} ))
        showTable(arr);

    }else{
        alert("ä¸èƒ½ä¸ºç©º");
    }

    }
// 2ã€ è·å– input å€¼
// 3ã€ æ•°ç»„ä¸­æ·»åŠ ä¸€ä¸ªå¯¹è±¡
// 4ã€ è°ƒç”¨ æ¸²æŸ“é¡µé¢æ–¹æ³•

//ä¿®æ”¹
var modelDom=document.getElementById("model");
var editIndex; //ä¿®æ”¹çš„ aar ä¸‹æ ‡
function edit(id){
       modelDom.style.display="block";

       var index = arr.findIndex(function(value){
            return value.id == id
       })

       document.getElementById("ename").value= arr[index].name;
       document.getElementById("eimg").value= arr[index].img;
       document.getElementById("eprice").value= arr[index].price; 
       document.getElementById("enum").value= arr[index].num;

       editIndex = index;
   
}

//å–æ¶ˆéšè—

var editNoDom=document.getElementById("editNo");
    editNoDom.onclick=function(){  
       modelDom.style.display="none";
        
    }

//ç¡®è®¤ä¿®æ”¹

var editOkDom=document.getElementById("editOk");
    editOkDom.onclick=function(){
        var name = document.getElementById("ename").value
        var img = document.getElementById("eimg").value
        var price = document.getElementById("eprice").value
        var num = document.getElementById("enum").value

        arr[editIndex].name=name;
        arr[editIndex].img=img;
        arr[editIndex].price=price;
        arr[editIndex].num=num;
        modelDom.style.display="none";
        localStorage.setItem("p20615",JSON.stringify( {"info":arr} ))
        showTable(arr);
    }
        //æœç´¢
    function searchFn(){
        var e= event || window.event;
        var s= e.target.value;
        if(e.keyCode == 13){
            var sArr= arr.filter(function(value){
                return value.name.includes(s);          
            })  
            showTable( sArr )
        }
    }
```

### 12-2  æ•°å­¦æ–¹æ³•Math()

```js
//å¸¸é‡PI
         console.log(Math.PI);

//æœ€å°å€¼
        console.log( Math.min(10,3,2,9,1,888,0,99 )  ); //0

//æœ€å¤§å€¼
        console.log( Math.max(10,3,2,9,1,888,0,99 )  );//888

//å‘ä¸Šå–æ•´
        console.log( Math.ceil(10.2) ); // 11

//å‘ä¸‹å–æ•´
        console.log( Math.floor(10.9) ); // 10

//å››èˆäº”å…¥
        console.log( Math.round(5.7) ); //6

//sort æ’åº
        var arr=[9,7,5,3,6];
        var arr2=arr.sort(function(a,b){
            return a-b; // ä»å°åˆ°å¤§
        })
        console.log(arr2);
        console.log("æœ€å°å€¼æ˜¯",arr2[0])

// å†’æ³¡æ’åº
        for(var i=0;i<arr.length;i++){
            for(var j=i+1;j<arr.length;j++){
                if(arr[i]>arr[j]){ // ä»å°åˆ°å¤§
                    var x= arr[i];
                    arr[i]=arr[j];
                    arr[j]=x;
                }
            }
        }
        console.log(arr,"æœ€å°å€¼æ˜¯",arr[0]);
/// ... æ“ä½œç¬¦
        console.log( Math.min( ...arr ));

//ç»å¯¹å€¼
        console.log( Math.abs(-9) );

//æ¬¡å¹‚
        console.log( Math.pow(2,3));

//å¹³æ–¹æ ¹
        console.log( Math.sqrt(16) );


// 0-1 çš„ éšæœºæ•°

        console.log( Math.random() )
// 0 --10 çš„éšæœºæ•°
        console.log( Math.floor(  Math.random()*10 ) )

// 3- 10 Math.floor( Math.random()*(æœ€å¤§å€¼-æœ€å°å€¼+1)+æœ€å°å€¼ )

        console.log( Math.floor( Math.random()*(10-3+1) +3 )  )
```

### 12-3 åˆ›å»º Date()

```js
        // è®¡ç®—æœº/æ—¶é—´æˆ³ çš„æ—¶é—´  1970 01 01 00:00:00
        //   ä¸œå…«åŒº            1970 01 01 08:00:00
        //    æœˆ  å°ä¸€  0 1 2 3 4 
        var a= new Date();
        console.log(a); //å½“å‰æ—¥æœŸ

                      // å¹´ æœˆ æ—¥ æ—¶åˆ†ç§’
        var b= new Date(2020,0,1,10,2,1);
        console.log(b);

        var c=new Date("2020-1-2 10:02:03");
        console.log( c);


        console.log(typeof a ); // å¯¹è±¡
        console.log("è½¬å­—ç¬¦ä¸²" ,a.toString() );
        console.log("è½¬ä¸ºæœ¬åœ°æ—¶é—´å­—ç¬¦ä¸²",a.toLocaleDateString()); //å¹´/æœˆ/æ—¥
        console.log("è½¬ä¸ºæœ¬åœ°æ—¶é—´å­—ç¬¦ä¸²",a.toLocaleTimeString());// ä¸Šåˆæ—¶:åˆ†:ç§’
        console.log("è½¬ä¸ºæœ¬åœ°æ—¶é—´å­—ç¬¦ä¸²",a.toLocaleString());//å¹´/æœˆ/æ—¥ä¸Šåˆæ—¶:åˆ†:ç§’
```

### 12-4  åˆ›å»ºåŠ¨æ€æ—¶é—´

```js
//<h1 id="h1"></h1>
        
setInterval(function(){
     var d= new Date();
    document.getElementById("h1").innerText= d.toLocaleString();
},1000);//1000è¡¨ç¤º1000æ¯«ç§’=1ç§’

//  str= `${year}-6-15  10:45:57`
// 2021å¹´6æœˆ15æ—¥  10:45:57
```

### 13-5  è·å–æ—¥æœŸ

```js
        var d= new Date();

        console.log("è·å–æ—¶é—´æˆ³,1970/1/1 0:0:0åˆ°ç°åœ¨çš„æ¯«ç§’æ•°", d.getTime() );

        console.log("è·å–å¹´",d.getFullYear());
        console.log("è·å–æœˆ,æœˆå°1",d.getMonth());
        console.log("è·å–æ—¥",d.getDate());

        console.log("è·å–æ˜ŸæœŸ,æ˜ŸæœŸæ—¥æ˜¯0",d.getDay());

        console.log("è·å–æ—¶",d.getHours());
        console.log("è·å–åˆ†",d.getMinutes());
        console.log("è·å–ç§’",d.getSeconds());
        console.log("è·å–æ¯«ç§’",d.getMilliseconds());
//------------------------------------------------------
        var num = 9;
        // è½¬ä¸ºå­—ç¬¦ä¸² åˆ¤æ–­é•¿åº¦  ,å¦‚æœ é•¿åº¦å°äº å‰é¢æ‹¼æ¥ 0 
        console.log( num.toString().length <2 ? "0"+num.toString(): num.toString());

// es6æ–°å¢å­—ç¬¦ä¸²æ–¹æ³•
// å¼€å¤´è¡¥é½ padStart(é•¿åº¦,è¡¥é½å€¼)
// ç»“å°¾è¡¥é½ padEnd(é•¿åº¦,è¡¥é½å€¼) 
        console.log( num.toString().padStart(2,"0") );
```

### 13-6   å°è£…æ—¶é—´æ ¼å¼

```js
function myTime(){
var d= new Date();

var year= d.getFullYear();
var mouth= (d.getMonth()+1).toString().padStart(2,"0");
var dates= d.getDate().toString().padStart(2,"0");

var hours= d.getHours().toString().padStart(2,"0");
var minutes= d.getMinutes().toString().padStart(2,"0");
var seconds= d.getSeconds().toString().padStart(2,"0");
var milliseconds= d.getMilliseconds().toString().padStart(2,"0");

return `${year}å¹´${mouth}æœˆ${dates}æ—¥ ${hours}:${minutes}:${seconds}:${milliseconds}`;

   }

//   var x=  myTime();

  setInterval(function(){
  document.getElementById("h1").innerText= myTime();
        },1);
```

### 13.7  å€’è®¡æ—¶

```js
//è®¾ç½®è®¡æ—¶å™¨
setInterval(function(){
var nowTime=new Date();
var endTime=new Date('2022-12-31 12:00:00');
if( endTime - nowTime >0){
            
    // console.log(endTime);
   var s= endTime.getTime()- nowTime.getTime();

    var tian= Math.floor( s /( 1000*60*60*24 ) ).toString().padStart(2,"0");
    // console.log("å¤©",tian);

    var shi=  Math.floor( s/(1000*60*60) %24).toString().padStart(2,"0");
    // console.log("æ—¶",shi);

    var fen =Math.floor( s/(1000*60)%60 ).toString().padStart(2,"0");
    // console.log("åˆ†",fen);

  var miao =Math.floor( s/(1000)%60 ).toString().padStart(2, '0');
   // console.log("ç§’",miao);
   var haomiao= Math.floor(s%1000);
    // console.log("æ¯«ç§’",haomiao);
    document.getElementById("h2").innerText=`${tian}å¤©  ${shi}:${fen}:${miao}:${haomiao} `;

  }else{
       document.getElementById("h2").innerText="å·²ç»åˆ°æœŸäº†";
     }
 },1);
```

### 13-8  è®¾ç½®æ—¥æœŸ

```js
        var d= new Date();

        // console.log(d);


        // d.setFullYear('2020');
        // d.setMonth('3');
        // d.setDate('19');
        // d.setHours('19');

        // console.log(d);

        var t= d.getTime();
        console.log( new Date(  t-1000*60*60*24 ) );
```

# 2.13

### 13.1 ç»¼åˆæ¡ˆä¾‹ä¹‹åšå®¢ç®¡ç†ç³»ç»Ÿ

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .form {
            display: flex;
        }
        .table {
            border-collapse: collapse;
            width: 70vw;
            text-align: center;
        }
        .table th,
        .table td {
            border: 1px solid brown;
        }

        .night {
            background: black;
            color: white;
        }
        #editOk {
            display: none;
        }
    </style>
</head>

<body>
    <h1>XXXX åšå®¢ç®¡ç†ç³»ç»Ÿ</h1>
    <!-- æ·»åŠ  -->
    <div>
        <form class="form">
            <div>
                <label for="title">æ–°é—»æ ‡é¢˜ï¼š</label>
                <input type="text" id="title">
            </div>
            <div>
                <label for="msg">æ–°é—»å†…å®¹ï¼š</label>
                <input type="text" id="msg">
            </div>
            <div>
                <label for="user">ä½œè€…å§“å</label>
                <select name="" id="user">
                    <option value="å¼ æ€»ç¼–">ç¼–è¾‘ä¸€éƒ¨</option>
                    <option value="ææ€»ç¼–">ç¼–è¾‘äºŒéƒ¨</option>
                </select>
            </div>
            <div>
                <input type="button" value="æ·»åŠ æ–°é—»" id="add">
                <input type="button" value="ç¡®è®¤ä¿®æ”¹" id="editOk">

            </div>
        </form>
    </div>
    <!-- æœç´¢ -->
    <div>
        <label for="">æ–°é—»æ£€ç´¢ï¼š</label>
        <input type="text" id="search">
        <button id="searchBtn">æœç´¢</button>
    </div>

    <button onclick="delAll()">å…¨éƒ¨åˆ é™¤</button>
    <button onclick="openClose()">å¼€å¯å¤œé—´æ¨¡å¼</button>

    <!-- å±•ç¤º -->
    <table class="table">
        <thead>
            <tr>
                <th>åºå·</th>
                <th>æ–°é—»æ ‡é¢˜</th>
                <th>æ–°é—»å†…å®¹</th>
                <th>ä½œè€…</th>
                <th>æ“ä½œ</th>
            </tr>
        </thead>
        <tbody id="tbody">
            <!-- <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td>
                    <button>åˆ é™¤</button>
                </td>
            </tr> -->
        </tbody>
    </table>
    <script src="./01.js"></script>
</body>

</html>
```

```js
// åˆå§‹æ•°æ®
// var arr=[
//     { "id":1,"title":"aaaa","msg":"aaaaaaaa","user":"å¼ æ€»ç¼–" },
//     { "id":2,"title":"bbbb","msg":"bbbbbbbb","user":"å¼ æ€»ç¼–" },
//     { "id":3,"title":"cccc","msg":"cccccccc","user":"å¼ æ€»ç¼–" },
//     { "id":4,"title":"dddd","msg":"dddddddd","user":"ææ€»ç¼–" }
// ];

var arr = localStorage.getItem("p2KaoShi") ? JSON.parse(localStorage.getItem("p2KaoShi")).info : []
//æ¸²æŸ“
function show(res) {
    var str = "";
    if (res.length > 0) {

        for (var i = 0; i < res.length; i++) {
            str += `
            <tr>
                <td>${i+1}</td>
                <td>${res[i].title}</td>
                <td>${res[i].msg}</td>
                <td>${res[i].user}</td>
                <td>
                    <button onclick="del(${res[i].id})">åˆ é™¤</button>
                    <button onclick="edit(${res[i].id})">ä¿®æ”¹</button>

                </td>
            </tr>
            `
        }

    } else {
        str += `
            <tr > <th colspan="5">æš‚æ— æ•°æ®,è¯·æ·»åŠ </th>  </tr>
        `
    }

    document.getElementById("tbody").innerHTML = str;
}
// é¡µé¢åŠ è½½å®Œæˆè°ƒç”¨ æ¸²æŸ“æ–¹æ³•
window.onload = function () {
    show(arr);
}
// åˆ é™¤ 
function del(id) {
    var index = arr.findIndex(function (v) {
        return v.id == id
    })
    arr.splice(index, 1);
    localStorage.setItem("p2KaoShi", JSON.stringify({
        "info": arr
    }));
    show(arr);
}
//å…¨éƒ¨åˆ é™¤
function delAll() {
    arr = [];
    localStorage.setItem("p2KaoShi", JSON.stringify({
        "info": arr
    }));
    show(arr);
}
//æ·»åŠ åŠŸèƒ½
var addDom = document.getElementById("add");
addDom.onclick = function () {
    //  è·å–è¡¨å•
    var titleDom = document.getElementById("title");
    var msgDom = document.getElementById("msg");
    var userDom = document.getElementById("user");
    //  è·å–è¡¨å•å€¼
    var title = titleDom.value;
    var msg = msgDom.value;
    var user = userDom.value;

    if (title && msg && user) {
        //  æ·»åŠ åˆ°æ•°ç»„
        arr.push({
            "id": new Date().getTime(),
            "title": title,
            "msg": msg,
            "user": user
        })
        //  è°ƒç”¨æ¸²æŸ“è¡¨æ ¼æ–¹æ³•
        localStorage.setItem("p2KaoShi", JSON.stringify({
            "info": arr
        }));
        show(arr);
    } else {
        alert("ä¸èƒ½ä¸ºç©º");
    }
}

// å¼€å¯/å…³é—­å¤œé—´æ¨¡å¼
var flag = false;

function openClose() {
    flag = !flag;

    var e = event || window.event;

    if (flag == true) {
        document.body.classList.add("night");
        e.target.innerText = "å…³é—­å¤œé—´æ¨¡å¼";
    } else {
        document.body.classList.remove("night");
        e.target.innerText = "å¼€å¯å¤œé—´æ¨¡å¼";
    }
}
// æŒ‰ä¸‹å›è½¦æœç´¢
var searchDom = document.getElementById("search");
searchDom.onkeydown = function () {
    // è·å–æ‰€æœ‰tr 
    var trsDom = document.querySelectorAll("#tbody > tr");
    // è·å– æœç´¢æ¡†å€¼
    var e = event || window.event;
    var search = searchDom.value;
    // è®©æ‰€æœ‰tr å»é™¤ æœç´¢æ ·å¼
    for (var j = 0; j < trsDom.length; j++) {
        trsDom[j].style.background = "";
    }
    // å¦‚æœ æŒ‰ä¸‹ å›è½¦ å¹¶ä¸” è¾“å…¥æ¡†æœ‰å€¼ 
    if (e.keyCode == 13 && search) {
        // å¾ªç¯ åˆ¤æ–­ å“ªä¸€é¡¹ ç¬¦åˆ
        for (var i = 0; i < arr.length; i++) {
            if (arr[i].title.includes(search) || arr[i].msg.includes(search) || arr[i].user.includes(search)) {
                // ç¬¦åˆ åŠ  èƒŒæ™¯é¢œè‰²   
                trsDom[i].style.background = "red";
            } else {
                // ä¸ç¬¦åˆ æ¸…é™¤ èƒŒæ™¯é¢œè‰²
                trsDom[i].style.background = "";
            }
        }
    }
}

// ç‚¹å‡»æŒ‰é’®æœç´¢
var searchBtnDom = document.getElementById("searchBtn");
searchBtnDom.onclick = function () {
    var search = searchDom.value;
    // è·å–æ‰€æœ‰tr 
    var trsDom = document.querySelectorAll("#tbody > tr");
    // è®©æ‰€æœ‰tr å»é™¤ æœç´¢æ ·å¼
    for (var j = 0; j < trsDom.length; j++) {
        trsDom[j].style.background = "";
    }
    if (search) {
        // å¾ªç¯ åˆ¤æ–­ å“ªä¸€é¡¹ ç¬¦åˆ
        for (var i = 0; i < arr.length; i++) {
            if (arr[i].title.includes(search) || arr[i].msg.includes(search) || arr[i].user.includes(search)) {
                // ç¬¦åˆ åŠ  èƒŒæ™¯é¢œè‰²   
                trsDom[i].style.background = "blue";
            } else {
                // ä¸ç¬¦åˆ æ¸…é™¤ èƒŒæ™¯é¢œè‰²
                trsDom[i].style.background = "";
            }
        }
    }
}

// ç‚¹å‡»ä¿®æ”¹

var editIndex;//å®šä¹‰å…¨å±€å˜é‡,ä¼ é€’ä¸‹æ ‡ç»™ä¿®æ”¹ç¡®è®¤æ—¶ä½¿ç”¨

function edit(id) {
    var index = arr.findIndex(function (v) {
        return v.id == id;
    })
    addDom.style.display = "none";
    document.getElementById("editOk").style.display = "block";

    //  è·å–è¡¨å•
    var titleDom = document.getElementById("title");
    var msgDom = document.getElementById("msg");
    var userDom = document.getElementById("user");
    //  è·å–è¡¨å•å€¼
    titleDom.value = arr[index].title;
    msgDom.value = arr[index].msg;
    userDom.value = arr[index].user;
    //ç»™ä¿®æ”¹idå…¨å±€å˜é‡èµ‹å€¼
    editIndex = index;
}


// ç¡®è®¤ä¿®æ”¹
var editOkDom = document.getElementById("editOk");
editOkDom.onclick = function () {
    //  è·å–è¡¨å•
    var titleDom = document.getElementById("title");
    var msgDom = document.getElementById("msg");
    var userDom = document.getElementById("user");
    //  è·å–è¡¨å•å€¼
    var title = titleDom.value;
    var msg = msgDom.value;
    var user = userDom.value;

    arr[editIndex].title = title;
    arr[editIndex].msg = msg;
    arr[editIndex].user = user;
    localStorage.setItem("p2KaoShi", JSON.stringify({
        "info": arr
    }));
    show(arr);
//å»ç©º
    titleDom.value = "";
    msgDom.value = "";

    addDom.style.display = "block";
    editOkDom.style.display = "none";
}
```

### 13.2  !!!æ¡ˆä¾‹--æœç´¢-å…¨é€‰åé€‰--æœç´¢--å¢-åˆ -æ”¹-éš”è¡Œå˜è‰²

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .form {
            display: flex;
        }
        .table {
            border-collapse: collapse;
            width: 70vw;
            text-align: center;
        }
        .table th,
        .table td {
            border: 1px solid brown;
        }

        .night {
            background: black;
            color: white;
        }
        #editOk {
            display: none;
        }
    </style>
</head>

<body>
    <h1>XXXX åšå®¢ç®¡ç†ç³»ç»Ÿ</h1>
    <!-- æ·»åŠ  -->
    <div>
        <form class="form">
            <div>
                <label for="title">æ–°é—»æ ‡é¢˜ï¼š</label>
                <input type="text" id="title">
            </div>
            <div>
                <label for="msg">æ–°é—»å†…å®¹ï¼š</label>
                <input type="text" id="msg">
            </div>
            <div>
                <label for="user">ä½œè€…å§“å</label>
                <select name="" id="user">
                    <option value="å¼ æ€»ç¼–">ç¼–è¾‘ä¸€éƒ¨</option>
                    <option value="ææ€»ç¼–">ç¼–è¾‘äºŒéƒ¨</option>
                </select>
            </div>
            <div>
                <input type="button" value="æ·»åŠ æ–°é—»" id="add">
                <input type="button" value="ç¡®è®¤ä¿®æ”¹" id="editOk">

            </div>
        </form>
    </div>
    <!-- æœç´¢ -->
    <div>
        <label for="">æ–°é—»æ£€ç´¢ï¼š</label>
        <input type="text" id="search">
        <button id="searchBtn">æœç´¢</button>
    </div>

    <button onclick="delAll()">å…¨éƒ¨åˆ é™¤</button>
    <button onclick="openClose()">å¼€å¯å¤œé—´æ¨¡å¼</button>

    <!-- å±•ç¤º -->
    <table class="table">
        <thead>
            <tr>
                <th>åºå·</th>
                <th>æ–°é—»æ ‡é¢˜</th>
                <th>æ–°é—»å†…å®¹</th>
                <th>ä½œè€…</th>
                <th>æ“ä½œ</th>
            </tr>
        </thead>
        <tbody id="tbody">
            <!-- <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td>
                    <button>åˆ é™¤</button>
                </td>
            </tr> -->
        </tbody>
    </table>
    <script src="./01.js"></script>
</body>

</html>
```

```js
// 1ã€æ¸²æŸ“

//1-1ã€æ¨¡æ‹Ÿæ•°æ®
// var arr= [
//     {"id":11,"check":false,"name":"ç™¾åº¦","job":"å‰ç«¯å·¥ç¨‹å¸ˆ","money":28000},
//     {"id":2 2,"check":false,"name":"ç™¾åº¦1","job":"å‰ç«¯å·¥ç¨‹å¸ˆ1","money":38000},
//     {"id":33,"check":false,"name":"ç™¾åº¦2","job":"å‰ç«¯å·¥ç¨‹å¸ˆ2","money":48000},
//     {"id":44,"check":false,"name":"ç™¾åº¦3","job":"å‰ç«¯å·¥ç¨‹å¸ˆ3","money":58000},
    
// ];

var arr=localStorage.getItem("p20616")?JSON.parse(  localStorage.getItem("p20616") ).info :[]

function show(res){
    var str="";
    for(var i=0;i<res.length;i++){
        if( i%2 ==0){
            str+=`
            <tr class="active">
                <td>
                    <input type="checkbox" ${res[i].check == true? "checked" :"" }  oninput="fan(${res[i].id})" > 
                </td>
                <td>${res[i].name}</td>
                <td>${res[i].job}</td>
                <td>${res[i].money}</td>
                <td>
                    <button onclick="del(${res[i].id})">åˆ é™¤</button>
                    <button onclick="edit(${res[i].id})">ä¿®æ”¹</button>
                </td>
            </tr>
            `
        }else{
            str+=`
            <tr >
                <td>
                    <input type="checkbox" ${res[i].check == true? "checked" :"" }  oninput="fan(${res[i].id})" > 
                </td>
                <td>${res[i].name}</td>
                <td>${res[i].job}</td>
                <td>${res[i].money}</td>
                <td>
                    <button onclick="del(${res[i].id})"> åˆ é™¤</button>
                    <button onclick="edit(${res[i].id})">ä¿®æ”¹</button>
                </td>
            </tr>
            `  
        }   
    }
    document.getElementById("tbody").innerHTML=str;
}
window.onload=function(){
    show(arr);
}
// åˆ é™¤

function del(id){
    var index= arr.findIndex(function(v){
        return v.id == id;
    })
    arr.splice(index,1);
    localStorage.setItem("p20616",JSON.stringify({ "info":arr }))
    show(arr);
}

function a(){
    var e= event ||window.event;

    // console.log(e.target.checked)
    var v= e.target.checked;
    for(var i=0;i<arr.length;i++){
        arr[i].check = v;
    }
    localStorage.setItem("p20616",JSON.stringify({ "info":arr }))
    show(arr);

}
//åé€‰
function fan(id){
    var index= arr.findIndex(function(v){
        return v.id == id;
    })
    var e= event || window.event
    arr[index].check =e.target.checked;

    
    var i = arr.findIndex(function(value){
        return value.check === false
    })

    if( i == -1){
        document.getElementById("a").checked =true;
    }else{
        document.getElementById("a").checked =false;
    }
    localStorage.setItem("p20616",JSON.stringify({ "info":arr }))
    show(arr);

}
//å…¨éƒ¨åˆ é™¤
function clearAll(){
    arr=[];
    localStorage.setItem("p20616",JSON.stringify({ "info":arr }))
    show(arr);
}
//æ·»åŠ 
var addDom=document.getElementById("add");
addDom.onclick=function(){
    var nameDom=document.getElementById("name");
    var jobDom=document.getElementById("job");
    var moneyDom=document.getElementById("money");

    var name= nameDom.value;
    var job= jobDom.value;
    var money= moneyDom.value;

    if(name && job && money){
        arr.push(
            {"id":new Date().getTime(),"check":false,"name":name,"job":job,"money":money}, 
        )
        localStorage.setItem("p20616",JSON.stringify({ "info":arr }))
        show(arr);
    }else{
        alert("ä¸èƒ½ä¸ºç©º");
    }
     //æ¸…ç©ºè¾“å…¥æ¡†
    nameDom.value="";
    jobDom.value="";
    moneyDom.value=""
  
}
//æœç´¢
var searchFnDom=document.getElementById("searchFn");
searchFnDom.onclick=function(){
    var searchVal= document.getElementById("search").value;

    var nArr=arr.filter(function(value){
        return value.name.includes(searchVal)
    })
    localStorage.setItem("p20616",JSON.stringify({ "info":arr }))
    show(nArr);
}


var editIndex;
//ä¿®æ”¹
function edit(id){
    var index= arr.findIndex(function(v){
        return v.id == id;
    })

    editIndex =index;

    var enameDom=document.getElementById("ename");
    var ejobDom=document.getElementById("ejob");
    var emoneyDom=document.getElementById("emoney");

    enameDom.value = arr[index].name;
    ejobDom.value= arr[index].job;
    emoneyDom.value= arr[index].money;

}
//ä¿®æ”¹ç¡®è®¤
var editOk=document.getElementById("editOk");

    editOk.onclick=function(){
        var enameDom=document.getElementById("ename");
        var ejobDom=document.getElementById("ejob");
        var emoneyDom=document.getElementById("emoney");

        var name= enameDom.value;
        var job= ejobDom.value;
        var money= emoneyDom.value;

        arr[editIndex].name=name;
        arr[editIndex].job=job;
        arr[editIndex].money=money;
//å­˜å‚¨
        localStorage.setItem("p20616",JSON.stringify({ "info":arr }))
        show(arr);

    }
```

### 13-3  å¼€å¯éš”è¡Œå˜è‰²--åŸç†

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
  <span>å…¨é€‰</span>  <input type="checkbox" oninput="a()" id="a">

  <ul id="ul">
      <!-- <li>
          <input type="checkbox"> <span>111</span>
      </li> -->
     
  </ul>

  <script>
      var arr=[
          { "id":1,"title":"1111","check":true},
          { "id":2,"title":"2222","check":false},
          { "id":3,"title":"3333","check":true},
          { "id":4,"title":"4444","check":true}

      ];

      function show(res){
          var str="";
          for(var i=0;i<res.length;i++){
            str+=`
            <li>
                <input type="checkbox" ${res[i].check == true ?"checked":"" }  oninput="fan(${res[i].id})"> 
                <span>${res[i].title}</span>
            </li>
            `
          }
          document.getElementById("ul").innerHTML=str;
      }
      show(arr);

// å…¨é€‰
      function a(){
        //   console.log("aaaaaaaa");
        var e= event || window.event;
        // console.log( e.target.checked );
        for(var i=0;i<arr.length;i++){
            arr[i].check =  e.target.checked 
        }

        show(arr);
      }
// åé€‰
      function fan(id){
        var index= arr.findIndex(function(v){
            return v.id == id;
        })
        var e= event || window.event;
        arr[index].check = e.target.checked;
        show(arr);
        // console.log(arr);
        var i = arr.findIndex(function(v){
            return v.check == false;
        })
        if(i==-1){
            document.getElementById("a").checked= true;
        }else{
            document.getElementById("a").checked= false;
        }
      }      
  </script>
</body>
</html>
```

### 13.4    å…¨é€‰åé€‰--åŸç†

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
  <span>å…¨é€‰</span>  <input type="checkbox" oninput="a()" id="a">
  <ul id="ul">
      <!-- <li>
          <input type="checkbox"> <span>111</span>
      </li> -->    
  </ul>
  <script>
      var arr=[
          { "id":1,"title":"1111","check":true},
          { "id":2,"title":"2222","check":false},
          { "id":3,"title":"3333","check":true},
          { "id":4,"title":"4444","check":true}
      ];

      function show(res){
          var str="";
          for(var i=0;i<res.length;i++){
            str+=`
            <li>
                <input type="checkbox" ${res[i].check == true ?"checked":"" }  oninput="fan(${res[i].id})"> 
                <span>${res[i].title}</span>
            </li>
            `
          }
          document.getElementById("ul").innerHTML=str;
      }
      show(arr);

// å…¨é€‰
      function a(){
        //   console.log("aaaaaaaa");
        var e= event || window.event;
        // console.log( e.target.checked );
        for(var i=0;i<arr.length;i++){
            arr[i].check =  e.target.checked 
        }

        show(arr);
      }
// åé€‰
      function fan(id){
        var index= arr.findIndex(function(v){
            return v.id == id;
        })
        var e= event || window.event;
        arr[index].check = e.target.checked;
        show(arr);
        // console.log(arr);
        var i = arr.findIndex(function(v){
            return v.check == false;
        })
        if(i==-1){
            document.getElementById("a").checked= true;
        }else{
            document.getElementById("a").checked= false;
        }
      }
      
  </script>


</body>
</html>
```



# 2.14

### 14-1--æ‹–åŠ¨å…ƒç´ 

```html
<div class="box">
<!-- æ‹–åŠ¨å…ƒç´  -->
<h1 draggable="true" ondragstart="drag()" id="one">å“ˆå“ˆå“ˆ</h1>
</div>

<!-- ç›®æ ‡å…ƒç´  -->
<div class="box" ondragover="over()" ondrop="drop()" id="box2"></div>

    <script>
        function drag(){
            var e=event ||window.event;

            e.dataTransfer.setData("id",e.target.id)
        }

        function over(){
            var e=event ||window.event;
            e.preventDefault();
        }

        function drop(){
            var e=event ||window.event;
            e.preventDefault();
            var id=  e.dataTransfer.getData("id");

document.getElementById("box2").appendChild( document.getElementById(id) )
        }
```

### 14-2  svgçŸ¢é‡å›¾

```js
    <svg width="100%" height="100%" version="1.1" xmlns="http://www.w3.org/2000/svg">

        <rect width="100" height="100" style="fill:rgb(0,0,255);stroke-width:1;
stroke:rgb(0,0,0)" />

    </svg>
```

### 14-3  canvas

```html
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <canvas width="300" height="300" style="border:1px solid #d3d3d3;" id="one"></canvas>

    <script>
        var c = document.getElementById("one");
        var ctx = c.getContext("2d");
        ctx.beginPath(); //
        ctx.moveTo(0, 0); //å¼€å§‹ä½ç½®
        ctx.lineTo(300, 300);
        ctx.strokeStyle = "red";
        ctx.stroke(); //ç”»çº¿æ¡
        ctx.closePath();
        ctx.beginPath(); //
        ctx.rect(50, 50, 100, 200);
        ctx.stroke();
        ctx.closePath();
        ctx.beginPath(); //
        //      åœ†å¿ƒx y ,åŠå¾„ï¼Œå¼€å§‹è§’åº¦,ç»“æŸè§’åº¦ ï¼ˆMath.PI  === 180åº¦ï¼‰
        ctx.arc(100, 100, 30, 0, Math.PI);
        ctx.stroke();
        ctx.closePath();
    </script>
</body>

</html>
```

### 14.4  Apache EChartså¯è§†åŒ–å›¾æ ‡åº“

ä¸€ä¸ªåŸºäº JavaScript çš„å¼€æºå¯è§†åŒ–å›¾è¡¨åº“https://echarts.apache.org/zh/index.html

```html
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <!-- å¼•å…¥ ECharts æ–‡ä»¶ -->
    <title>ECharts</title>
    <script src="./echarts.min.js"></script>
</head>

<body>
    <!-- ä¸º ECharts å‡†å¤‡ä¸€ä¸ªå…·å¤‡å¤§å°ï¼ˆå®½é«˜ï¼‰çš„ DOM -->
    <div id="main" style="width: 600px;height:400px;"></div>

    <script type="text/javascript">

        var arr=[
                    {"name":"è¡¬è¡«","value":50},
                    {"name":"ç¾Šæ¯›è¡«","value":20},
                    {"name":"é›ªçººè¡«","value":36},
                    {"name":"é›ªçººè¡«2","value":36},
                    {"name":"é›ªçººè¡«2","value":36},
                ]

        var x =[];
        var y=[];
        for(var i=0;i<arr.length;i++){
            x.push( arr[i].name );
            y.push( arr[i].value );
        }

        // åŸºäºå‡†å¤‡å¥½çš„domï¼Œåˆå§‹åŒ–echartså®ä¾‹
        var myChart = echarts.init(document.getElementById('main'));

        // æŒ‡å®šå›¾è¡¨çš„é…ç½®é¡¹å’Œæ•°æ®
        var option = {
            title: {
                text: 'ECharts å…¥é—¨ç¤ºä¾‹'
            },
            tooltip: {},
            legend: {
                data:['é”€é‡']
            },
            xAxis: {
                data: x
            },
            yAxis: {},
            series: [{
                name: 'é”€é‡',
                type: 'bar',
                data:y,
                itemStyle: {
            normal: {
ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€//è¿™é‡Œæ˜¯é‡ç‚¹
                color: function(params) {
                	//æ³¨æ„ï¼Œå¦‚æœé¢œè‰²å¤ªå°‘çš„è¯ï¼Œåé¢é¢œè‰²ä¸ä¼šè‡ªåŠ¨å¾ªç¯ï¼Œæœ€å¥½å¤šå®šä¹‰å‡ ä¸ªé¢œè‰²
                    var colorList = ['#c23531','#2f4554', '#61a0a8', '#d48265', '#91c7ae','#749f83', '#ca8622'];
                    return colorList[params.dataIndex]
                }
            }
        }
            }],                      
        };
        // ä½¿ç”¨åˆšæŒ‡å®šçš„é…ç½®é¡¹å’Œæ•°æ®æ˜¾ç¤ºå›¾è¡¨ã€‚
        myChart.setOption(option);
    </script>
</body>
</html>
```

### 14.5  åŠ¨ç”»

### 14.6   æ¡ˆä¾‹å·¦å³ç©¿æ¢­æ¡†ä¹‹ä¸¤æ•°ç»„æ–¹æ³•

```html
<!DOCTYPE html>
<html>
 <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç©¿æ¢­æ¡†</title>
    <style>
        #box {
            width: 600px;
            margin: auto;
        }
        #box2 {
            display: flex;
            padding: 10px;
        }
        #box2>div {
            height: 300px;
            width: 200px;
        }
        #box3, #box5 {
            border: 1px solid red;
        }
        #box4 {
            text-align: center;
        }
        ol>li {
            cursor: pointer;
            width: 80%;
        }
        ol>li:hover {
            background-color: #f90;
        }
        .active {
            background-color: #ddd;
        }
    </style>
</head>

<body>
    <div id="box">
        <div id="entry">
            <label>
                æ¨¡å—åç§°:<input type="text" id="moduleName" />
            </label>
            <button type="button" id="addModule">æ·»åŠ </button>
        </div>
        <div id="box2">
            <div id="box3">
                <h2>æœªé€‰æ¨¡å—</h2>
                <ol id="box6"></ol>
            </div>
            <div id="box4">
                <button type="button" id="addAll">å…¨éƒ¨æ·»åŠ &gt;&gt;</button><br /><br />
                <button type="button" id="add">æ·»åŠ &gt;&gt;</button><br /><br />
                <button type="button" id="del">&lt;&lt;åˆ é™¤</button><br /><br />
                <button type="button" id="delAll">&lt;&lt;å…¨éƒ¨åˆ é™¤</button>
            </div>
            <div id="box5">
                <h2>å·²é€‰æ¨¡å—</h2>
                <ol id="box7"></ol>
            </div>
        </div>
    </div>
    <script>
        //è·å–åˆ°é¢‘é“åç§°æ¨¡å— 
        var moduleName = document.getElementById("moduleName");
        // è·å–åˆ°æ·»åŠ æŒ‰é’®
        var addModule = document.getElementById("addModule");
        // è·å–åˆ°å·¦æ–¹ç›’å­
        var box6 = document.getElementById("box6");
        // è·å–åˆ°å³æ–¹ç›’å­
        var box7 = document.getElementById("box7");
        // è·å–åˆ°å…¨éƒ¨æ·»åŠ æŒ‰é’®
        var addAll = document.getElementById("addAll");
        // è·å–åˆ°æ·»åŠ åˆ°å³è¾¹æŒ‰é’®
        var add = document.getElementById("add");
        // è·å–åˆ°åˆ é™¤åˆ°å·¦è¾¹æŒ‰é’®
        var del = document.getElementById("del");
        // è·å–åˆ°åˆ é™¤å…¨éƒ¨æŒ‰é’®
        var delAll = document.getElementById("delAll");
 
        var tempArr1 = [];
        var tempArr2 = [];

        if (localStorage.obj1220) {
            var obj = JSON.parse(localStorage.obj1220);
            var left = obj.left;
            var right = obj.right;
            showDom(left, box6);
            showDom(right, box7);
        } else {
            var obj = {
                left: [],
                right: []
            }
            localStorage.obj1220 = JSON.stringify(obj);
        }
        //console.log("localStorage:",localStorage.obj1220);
 
        addModule.onclick = function () {
            
            var mName = moduleName.value;
            if (mName) {
                var obj = JSON.parse(localStorage.obj1220);
                obj.left.push(mName);
                console.log("obj:", obj);
                localStorage.obj1220 = JSON.stringify(obj);
                var left = obj.left;
                var right = obj.right;
                showDom(left, box6);
                showDom(right, box7);
                moduleName.value = "";
            } else {
                alert("æ¨¡å—åç§°ä¸èƒ½ä¸ºç©º");
            }
        }

        addAll.onclick = function () {
            all(1);
        }
 
        delAll.onclick = function () {
            all(vv0);
        }
 
        box6.onclick = function (event) {
            var e = event || window.event;
            upd(1, e);
        }

        add.onclick = function () {
            if (tempArr1.length > 0) {
                var obj = JSON.parse(localStorage.obj1220);
                var left = obj.left;
                var right = obj.right;
                var left = left.filter(function (a, b) {
                    //console.log("a:",a,"b:",b);
                    return tempArr1.indexOf(a) == -1;
                });
                console.log("left:", left);
                right = right.concat(tempArr1);
                console.log("right:", right);
                obj.left = left;
                obj.right = right;
                localStorage.obj1220 = JSON.stringify(obj);
                showDom(left, box6);
                showDom(right, box7);
                tempArr1 = [];
            } else {
                alert("è¯·é€‰æ‹©è¦æ·»åŠ çš„é¡¹");
            }
        }

        box7.onclick = function (event) {
            var e = event || window.event;
            upd(0, e);
        }

        del.onclick = function () {
            if (tempArr2.length > 0) {
                var obj = JSON.parse(localStorage.obj1220);
                var left = obj.left;
                var right = obj.right;
 
                var right = right.filter(function (a, b) {
                    //console.log("a:",a,"b:",b);
                    return tempArr2.indexOf(a) == -1;
                });
                console.log("left:", left);
                left = left.concat(tempArr2);
                console.log("right:", right);
                obj.left = left;
                obj.right = right;
                localStorage.obj1220 = JSON.stringify(obj);
                showDom(left, box6);
                showDom(right, box7);
                tempArr2 = [];
            } else {
                alert("è¯·é€‰æ‹©è¦æ·»åŠ çš„é¡¹");
            }
        }
 
        function upd(f, e) {
            //console.log("e:",e);
            var d = e.path[2];
            var lis = d.querySelectorAll("li");
            lis = Array.prototype.slice.call(lis);
            var i = 0;
 
            var obj = JSON.parse(localStorage.obj1220);
            var left = obj.left;
            var right = obj.right;
            if (e.target.nodeName == "LI") {
                i = lis.indexOf(e.target);
                if (e.target.classList.contains("active")) {
                    e.target.classList.remove("active");
                    if (f) {
                        var a = tempArr1.indexOf(left[i]);
                        tempArr1.splice(a, 1);
                    } else {
                        var b = tempArr1.indexOf(right[i]);
                        tempArr2.splice(b, 1);
                    }

                } else {
                    e.target.classList.add("active");
                    if (f) {
                        tempArr1.push(left[i]);
                    } else {
                        tempArr2.push(right[i]);
                    }
                }
            }
            console.log("tempArr1:", tempArr1);
            console.log("tempArr2:", tempArr2);
        }
        function all(f) {
            var obj = JSON.parse(localStorage.obj1220);
            var left = obj.left;
            var right = obj.right;
            if (f) {
                right = right.concat(left);
                left = [];
            } else {
                left = left.concat(right);
                right = [];
            }
            obj.left = left;
            obj.right = right;
            localStorage.obj1220 = JSON.stringify(obj);
            showDom(left, box6);
            showDom(right, box7);
        }
        function showDom(arr, dom) {
            dom.innerHTML = "";
            var li = "";
            for (var i = 0; i < arr.length; i++) {
                if (arr[i]) {
                    li += "<li>" + arr[i] + "</li>";
                }
            }
            dom.innerHTML = li;
        }
    </script>
</body>
</html>
```

### 14.7  åˆ†é¡µåŸç†

```html
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .page {
            display: flex;
        }
    </style>
</head>

<body>
    <ul id="ul">

    </ul>
    <p>
        æ€» <span id="total">x</span>é¡µ æ¯é¡µæ˜¾ç¤º 5æ¡ å½“å‰ç¬¬ <span id="nowpage">x</span>é¡µ
    </p>

    <div class="page">
        <button onclick="prevPage()">ä¸Šä¸€é¡µ</button>

        <div id="pageBtn">
            <!-- <button>1</button>
             <button>2</button>
             <button>3</button> -->
        </div>

        <button onclick="nextPage()">ä¸‹ä¸€é¡µ</button>

        <input type="text"> <button>è·³è½¬</button>
    </div>

    <script>
        var totalDom = document.getElementById("total");
        var nowpageDom = document.getElementById("nowpage");

        var page = 1; // å½“å‰ç¬¬ä¸€é¡µ
        var limit = 5; // æ¯é¡µæ˜¾ç¤ºæ¡æ•°
        var total = 0;
        // æ¯é¡µ æ˜¾ç¤º5æ¡  16 æ¡æ•°æ® ã€‚ æ€»å…± 4 é¡µ 
        var arr = [{
                "id": 1,
                "title": "aaa"
            },
            {
                "id": 2,
                "title": "bbb"
            },
            {
                "id": 3,
                "title": "ccc"
            },
            {
                "id": 4,
                "title": "ddd"
            },
            {
                "id": 5,
                "title": "eee"
            },
            {
                "id": 6,
                "title": "fff"
            },
            {
                "id": 7,
                "title": "ggg"
            },
            {
                "id": 8,
                "title": "hhh"
            },
            {
                "id": 9,
                "title": "iii"
            },
            {
                "id": 10,
                "title": "jjj"
            },
            {
                "id": 11,
                "title": "kkk"
            },
            {
                "id": 12,
                "title": "lll"
            },
            {
                "id": 13,
                "title": "mmm"
            },
            {
                "id": 14,
                "title": "nnn"
            },
            {
                "id": 15,
                "title": "ooo"
            },
            {
                "id": 16,
                "title": "ppp"
            },
        ];
        //console.log( arr.slice( (page-1)*limit ,page*limit) );// åˆ†é¡µåŸç†

        // è®¡ç®— æ€» é¡µæ•° = æ€»æ¡æ•°/æ¯é¡µæ˜¾ç¤ºæ¡æ•° å‘ä¸Šå–æ•´
        function totalFn(shuJu, tiaoShu) {
            return Math.ceil(shuJu.length / tiaoShu)
        }
        // å¾ªç¯ åˆ†é¡µ æŒ‰é’®
        function pageBtn(n) {
            // n æ€»é¡µæ•° 4
            var str = "";
            for (var i = 0; i < n; i++) {
                str += `
                <button onclick="fy(${i+1})">${i+1}</button>
                `
            }
            document.getElementById("pageBtn").innerHTML = str;

        }
        // æ¸²æŸ“
        function show(res) {
            var str = "";
            for (var i = 0; i < res.length; i++) {
                str += `
                     <li>${res[i].title}</li>
                `
            }
            document.getElementById("ul").innerHTML = str;
        }
        window.onload = function () {
            total = totalFn(arr, limit);
            pageBtn(total);
            totalDom.innerText = total;
            nowpageDom.innerText = page;

            show(arr.slice((page - 1) * limit, page * limit))
        }
        // ç‚¹å‡»  æŒ‰é’® 1 2 3 4 
        function fy(n) {
            page = n;
            show(arr.slice((page - 1) * limit, page * limit));
            nowpageDom.innerText = page;

            var e = event || window.event;
            var btns = e.target.parentNode.children;
            for (var i = 0; i < btns.length; i++) {
                btns[i].style.color = "black";
            }
            e.target.style.color = "red";

        }
        // ä¸‹ä¸€ é¡µ
        function nextPage() {
            if (page < total) {
                page++;

                show(arr.slice((page - 1) * limit, page * limit));
            } else {
                alert("å·²ç»æ˜¯æœ€åä¸€é¡µäº†")
            }
        }
        //   ä¸Šä¸€é¡µ

        function prevPage() {
            if (page > 1) {
                page--;

                show(arr.slice((page - 1) * limit, page * limit));
            } else {
                alert("å·²ç»æ˜¯é¦–é¡µäº†")
            }
        }
    </script>

</body>

</html>
```

# 2.15



# 2.16

### æ•°ç»„æ‰å¹³åŒ–

```js
// var arr=[ 1,"aa",true,{"name":"gao"}, [1,2]  ];
        var arr=[ 1,2,3,[4,5,[6,7]] ]; // å¤šç»´æ•°ç»„
        //é€’å½’ é™ç»´  / æ‰å¹³åŒ–
        var x=[]
        function xx(arr){    
            for(var i=0;i<arr.length;i++){
                if( Array.isArray( arr[i] ) ){
                    xx(arr[i])
                }else{
                    x.push(arr[i])
                }
            }
            return x;            
        }
         console.log(  xx(arr) );
```

### å›è°ƒå‡½æ•°

```js
//å‡½æ•°å£°æ˜ 
/*
    function fn1(){
        console.log("111")
    }
    fn1();

    var fn2=function(){
        console.log("222")

    }
    fn2()
    var fn3=new Function("x","y","return x+y");
    console.log( fn3(1,2) )
*/
    // æŠŠä¸€ä¸ªå‡½æ•° å½“ä½œå‚æ•° ä¼ å…¥å¦ä¸€ä¸ªå‡½æ•°  --- å›è°ƒå‡½æ•°
    function a( x ){
        x(); 
    }
    a( function(){ console.log("å“ˆå“ˆå“ˆå“ˆ") }   )
//---------------------------

    function b(x){
        x( 1,2 )
    }
    b( function(j,p){
        console.log( j+p );
       }     
    )
```

### é—­åŒ…

```js
// å‡½æ•° å½“ä½œ å¦ä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼ -- é—­åŒ…å‡½æ•°
// å¯ä»¥è®¿é—® å‡½æ•° å†…éƒ¨å˜é‡çš„ å‡½æ•°å«é—­åŒ…å‡½æ•°---é—­åŒ…
// é€šå¸¸å†™æ³•ï¼š å‡½æ•°åµŒå¥—å‡½æ•°  
// ä¼˜ç‚¹ã€ä½œç”¨ï¼š å¯ä»¥è®¿é—® å¦ä¸€ä¸ªå‡½æ•°çš„å†…éƒ¨å˜é‡ 
//            å˜é‡ é•¿æœŸé©»æ‰å†…å­˜ ï¼Œä¸ä¼šé”€æ¯
// ç¼ºç‚¹     ï¼šå†…å­˜æ³„æ¼
function ff(){
    var xx =123; 
    return function(){
        console.log("å“ˆ",xx); // é—­åŒ…å˜é‡
    }
}  
ff()();
  // å‡½æ•°å½“ä½œ å‚æ•°å€¼  -- å›è°ƒ å‡½æ•°
  // å‡½æ•°å½“ä½œ è¿”å›å€¼  -- é—­åŒ… å‡½æ•°
```

### 16-1  ç•™è¨€æ¿æ¡ˆä¾‹

```html
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./css/1.css">
</head>

<body>
    <!-- å‘è¡¨ç•™è¨€ -->
    <div class="box1">
        <div class="header" id="header">
            <p>å¤´åƒ</p>
            <img src="./images/a.PNG" alt="">
            <img src="./images/b.PNG" alt="">
            <img src="./images/c.PNG" alt="">
            <img src="./images/d.PNG" alt="">
        </div>

        <textarea name="" id="msg" cols="30" rows="10" maxlength="18"></textarea>
        <div class="addbox">
            <button id="add">å‘è¡¨ </button>
            <p>è¿˜å¯ä»¥è¾“å…¥<span id="num">18</span>ä¸ªå­—ï¼Œæœ€å¤š18ä¸ª</p>
        </div>
    </div>

    <!-- ç•™è¨€å±•ç¤º -->
    <div class="box2" id="box2">
        <!-- <div>
            <div class="item"> 
                <img src="./img/a.PNG" alt="">
                <p>æ˜¯ï¼Œï¼Œï¼Œï¼ŒçŸ­å‘å®¶é‡Œçš„é£æœºå•Šç®—äº†</p>
                <button>åˆ é™¤</button>
            </div>
            <p>2020-11-11 ä¸‹åˆ3:34:11</p>
            <hr/>
        </div> -->
    </div>

    <script src="./1.js"></script>
</body>

</html>
```

```css
*{
    margin: 0;
    padding: 0;
}
.box1{
    width: 360px;
    border: 1px solid red;

}
.header{
    display: flex;
    align-items: center;
}
.header > img{
    width: 80px;
    height: 80px;
}
#msg{
    width: 350px;
}
.addbox{
    display: flex; 
    justify-content: space-between; 
}
.box2{
    margin-top: 10px;
    width: 360px;
    border: 1px solid red;
}
.item{
    display: flex;
    justify-content: space-between;
}
.item >img {
    width: 50px;
    height: 50px;

}
.b{
    border: 5px solid red;
}
```

```js
//æ¨¡æ‹Ÿæ•°æ®
// var arr=[
//     // { "id":11, "img":"./img/a.PNG","msg":"å•Šå•Šå•Šå•Š","time":11111111},
//     // { "id":22, "img":"./img/b.PNG","msg":"å•Šå•Šå•Šå•Š1","time":11111111},
//     // { "id":33, "img":"./img/c.PNG","msg":"å•Šå•Šå•Šå•Š2","time":11111111},
//     // { "id":44, "img":"./img/d.PNG","msg":"å•Šå•Šå•Šå•Š3","time":11111111},

// ]

var arr = localStorage.getItem("p2062103") ? JSON.parse(localStorage.getItem("p2062103")).info : []

function show(res) {
    var str = "";
    for (var i = 0; i < res.length; i++) {
        str += `
        <div>
            <div class="item"> 
                <img src="${res[i].img}" alt="">
                <p>${res[i].msg}</p>
                <button onclick="del(${res[i].id})">åˆ é™¤</button>
            </div>
            <p>${myTime(res[i].time)}</p>
            <hr/>
        </div>
        `
    }
    document.getElementById("box2").innerHTML = str;
}

window.onload = function () {
    show(arr);
}

//åˆ é™¤
function del(id) {

    //è·å¾—idæ™®é€šå‡½æ•°å†™æ³•
    // var index= arr.findIndex(function(v){
    //     return  v.id == id 
    // } )

    //è·å¾—idç®­å¤´å‡½æ•°å†™æ³•
    var index = arr.findIndex(v => v.id == id)
    //æ‰¾åˆ°ä¸‹æ ‡,åˆ é™¤æ•°æ®
    arr.splice(index, 1);
    //åˆ é™¤åä¿å­˜
    localStorage.setItem("p2062103", JSON.stringify({
        "info": arr
    }));
    //æœ€æ–°çš„æ•°æ®æ¸²æŸ“åˆ°é¡µé¢
    show(arr);
}

//è·å–å›¾ç‰‡
var img = document.querySelectorAll("#header >img");
//ç»™å››ä¸ªå›¾ç‰‡èŠ‚ç‚¹æ·»åŠ ç‚¹å‡»äº‹ä»¶,æ·»åŠ é«˜äº®æ ·å¼(ç‚¹ä¸­çš„åŠ ,å…¶ä»–çš„å»æ ·å¼)
for (let i = 0; i < img.length; i++) {
    img[i].onclick = function () {
        for (var j = 0; j < img.length; j++) {
            img[j].classList.remove("b");
        }

        img[i].classList.add("b");

    }
}
//è·å–è¾“å…¥æ¡†çš„æ–‡å­—
var msgDom = document.getElementById("msg");
//å½“æ–‡å­—è¾“å…¥æ—¶,è§¦å‘äº‹ä»¶,æ˜¾ç¤ºè¿˜æœ‰å¤šå°‘æ–‡å­—å¯è¾“å…¥
msgDom.oninput = function () {
    var x = 18 - msgDom.value.length;

    document.getElementById("num").innerText = x;
}

//æ·»åŠ 
var addDom = document.getElementById("add");
addDom.onclick = function () {
    //å¾ªç¯å›¾ç‰‡èŠ‚ç‚¹,åˆ¤æ–­æ˜¯å¦æœ‰é«˜äº®class,æœ‰åˆ™ç»ˆæ­¢
    var index = -1;
    for (var i = 0; i < img.length; i++) {
        if (img[i].classList.contains("b")) {
            index = i;
            break;
        }
    }
    //è·å–è¾“å…¥çš„ç•™è¨€æ¿æ–‡å­—å†…å®¹
    var msg = msgDom.value;
    //éç©ºéªŒè¯
    if (index > -1 && msg.length > 0) {
        //éç©ºåˆ™åŠ å…¥åˆ°æ·»åŠ 
        arr.push({
            "id": new Date().getTime(),
            "img": img[index].src,
            "msg": msg,
            "time": new Date().getTime()
        })
        //ä¿å­˜
        localStorage.setItem("p2062103", JSON.stringify({
            "info": arr
        }));
        //æ¸²æŸ“é¡µé¢
        show(arr);

    } else {
        alert("ä¸èƒ½è¾“å…¥");
    }


    //  æ¸…ç©º å†…å®¹ 
    msgDom.value = "";
    document.getElementById("num").innerText = 18;
    for (var j = 0; j < img.length; j++) {
        img[j].classList.remove("b");
    }


}
//å°è£…æ—¶é—´æ ¼å¼
function myTime(t) {
    var time = new Date(t);
    var year = time.getFullYear();
    var month = (time.getMonth() + 1).toString().padStart(2, "0");
    var date = time.getDate().toString().padStart(2, "0");

    var hours = time.getHours().toString().padStart(2, "0");
    var minutes = time.getMinutes().toString().padStart(2, "0");
    var seconds = time.getSeconds().toString().padStart(2, "0");

    return `${year}å¹´ ${month}æœˆ${date}æ—¥ ${hours}:${minutes}:${seconds}`;
}
```



# 2.17

### 17.1  è´­ç‰©è½¦æ¡ˆä¾‹--å¢-åˆ -å…¨é€‰åé€‰-æ•°é‡åŠ å‡

```html
<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/index.css">
    <title>Document</title>
</head>

<body>
    <div class="con W1410">
        <div class="con_top">
            <table>
                <thead class="con_top_head">
                    <tr>
                        <th>
                            <input type="checkbox" id="allCheck" > å…¨é€‰
                        </th>
                        <th></th>
                        <th>å•†å“åç§°</th>
                        <th>å•ä»·</th>
                        <th>æ•°é‡</th>
                        <th>å°è®¡</th>
                        <th>æ“ä½œ</th>
                    </tr>
                </thead>
                <tbody class="con_top_body" >
                    <!-- <tr>
                        <td><input type="checkbox"  name="check" ></td>
                        <td class="img">
                            <img src="images/Bi.png" alt="">
                        </td>
                        <td class="name">
                            å·¨èƒ½å†™
                        </td>
                        <td class="price">39.9å…ƒ</td>
                        <td class="math">
                            <div class="b1">-</div>
                            <div class="b2">10</div>
                            <div class="b3" >+</div>
                        </td>
                        <td class="maxPrice"><span>39.9</span>å…ƒ</td>
                        <td class="del">X</td>
                    </tr> -->
                </tbody>
            </table>
            <div class="all">
                <div class="all_1">ç»§ç»­è´­ç‰©</div>
                <div class="all_2">å…± <span id="all">0</span> ä»¶å•†å“ï¼Œå·²é€‰æ‹© <span id="has">0</span> ä»¶</div>
                <div class="all_3">åˆè®¡ï¼š<span id="allPrice">39</span>å…ƒ</div>
                <div class="all_4">å»ç»“ç®—</div>
            </div>
        </div>
        <div class="con_bottom">
            <!-- <div class="bottom_box">
                <img src="images/Bi.png" alt="">
                <h4>å·¨èƒ½å†™</h4>
                <span>39.9å…ƒ</span>
                <p>1000äººå¥½è¯„</p>
                <div class="add">åŠ å…¥è´­ç‰©è½¦</div>
            </div> -->            
        </div>
    </div>
    <script src="js/index.js"></script>
</body>

</html>
```

```js
// æ¨èå•†å“ æ•°æ®
var arr=[
	{
        "id":11,
		"goodsName":"Redmi&emsp;AirDotsçœŸæ— çº¿è“ç‰™",
		"img":"ErJi.png",
		"price":99.9,
		"goodsRatings":"4.3ä¸‡äººå¥½è¯„",
		"check":false
	}, {
        "id":22,
		"goodsName":"å°ç±³å°ä¹¦åŒ…",
		"img":"ShuBao.png",
		"price":29,
		"goodsRatings":"4ä¸‡äººå¥½è¯„",
		"check":false
	}, {
        "id":33,
		"goodsName":"å°ç±³å·¨èƒ½å†™ä¸­æ€§ç¬”",
		"img":"Bi.png",
		"price":9.99,
		"goodsRatings":"2068äººå¥½è¯„",
		"check":false
	},{
        "id":44,
		"goodsName":"è´åŒ»ç”Ÿ0+é˜²è›€å¥é½¿ç‰™è†",
		"img":"YaGao.png",
		"price":12.9,
		"goodsRatings":"5263ä¸‡äººå¥½è¯„",
		"check":false
	},{
        "id":55,
		"goodsName":"å°ç±³æ‰‹ç¯3/4é€šç”¨è…•å¸¦",
		"img":"ShouHuan.png",
		"price":19.9,
		"goodsRatings":"5384ä¸‡äººå¥½è¯„",
		"check":false
	}
]

// è´­ç‰©è½¦æ•°æ®

// var carArr=[
//     {
//         "id":11,
// 		"goodsName":"Redmi AirDotsçœŸæ— çº¿è“ç‰™",
// 		"img":"ErJi.png",
// 		"price":99.9,
// 		"check":false,
//         "num":1
// 	},
//     {
//         "id":22,
// 		"goodsName":"å°ç±³å°ä¹¦åŒ…",
// 		"img":"ShuBao.png",
// 		"price":29,
// 		"check":true,
//         "num":2
// 	}
// ]

var carArr=localStorage.getItem("p20622am")?JSON.parse( localStorage.getItem("p20622am") ).info :[];

// æ¸²æŸ“ æ¨èå•†å“

function showGoods(arr){
    var str="";
    
    arr.forEach(function(v,index){
        str+=`
        <div class="bottom_box">
                <img src="images/${v.img}" alt="">
                <h4>${v.goodsName}</h4>
                <span>${v.price}å…ƒ</span>
                <p>${v.goodsRatings}</p>
                <div class="add" onclick=add('${JSON.stringify(v)}')>åŠ å…¥è´­ç‰©è½¦</div>
         </div>
        `
    })
    // for(var v of arr){
       
    // }
   document.querySelector(".con_bottom").innerHTML=str;

  
}
// æ¸²æŸ“ è´­ç‰©è½¦
function showCar(arr){
    var str="";
    arr.forEach((v,index)=>{
        str+=`
        <tr>
            <td><input type="checkbox" ${v.check? "checked" :""}  name="check" oninput="oneCheck(${v.id})" ></td>
            <td class="img">
                <img src="images/${v.img}" alt="">
            </td>
            <td class="name">
                ${v.goodsName}
            </td>
            <td class="price">${v.price}å…ƒ</td>
            <td class="math">
                <div class="b1" onclick="decrease(${v.id})">-</div>
                <div class="b2">${v.num}</div>
                <div class="b3" onclick="increase(${v.id})">+</div>
            </td>
            <td class="maxPrice"><span>${ (v.price*v.num).toFixed(2) }</span>å…ƒ</td>
            <td class="del" onclick="del(${v.id})">X</td>
        </tr>
        `
    })

    document.querySelector(".con_top_body").innerHTML=str;
}

window.onload=function(){
    showGoods(arr);
    showCar(carArr);
    count(carArr);
}
//åˆ é™¤è´­ç‰©è½¦æ•°æ®
function del(id){
    // var index = carArr.findIndex(function(v){ return v.id == id });
    var index = carArr.findIndex(v=>v.id == id);
    carArr.splice(index,1);

   
    showCar(carArr);
    count(carArr);
    localStorage.setItem("p20622am",JSON.stringify({"info":carArr}));

}

// æ•°é‡å‡
function decrease(id){
    var index = carArr.findIndex(v=>v.id == id);
        if(carArr[index].num >1){
            carArr[index].num -=1;
            showCar(carArr);
        }else{
            carArr.splice(index,1);
            showCar(carArr);
        }
        count(carArr);
        localStorage.setItem("p20622am",JSON.stringify({"info":carArr}));  
}

// æ•°é‡åŠ  
function increase(id){
    var index = carArr.findIndex(v=>v.id == id);
        carArr[index].num +=1;
        showCar(carArr);  
        count(carArr);
        localStorage.setItem("p20622am",JSON.stringify({"info":carArr}));
}

// å…¨é€‰
var allCheckDom=document.getElementById("allCheck");
    allCheckDom.oninput=function(){
      
        var allCheck= allCheckDom.checked ;
        carArr.forEach(function(v,index){
            v.check= allCheck;
        })

        showCar(carArr);
        count(carArr);
        localStorage.setItem("p20622am",JSON.stringify({"info":carArr}));
    }

// é€‰ä¸­æ¯ä¸€é¡¹
function oneCheck(id){
    var index = carArr.findIndex(v=>v.id == id);
        carArr[index].check=!carArr[index].check;

    var flag = carArr.findIndex(v=>v.check == false);
    if(flag==-1){
        allCheckDom.checked=true;
    }else{
        allCheckDom.checked=false;
    }
        showCar(carArr);
        count(carArr);
        localStorage.setItem("p20622am",JSON.stringify({"info":carArr}));
}

// è®¡ç®— å…± X ä»¶å•†å“ã€å·²é€‰æ‹©X ä»¶ã€åˆè®¡å¤šå°‘å…ƒ

function count(arr){
    var total=0;// å…± X ä»¶å•†å“
    var buy  =0;//å·²é€‰æ‹©X ä»¶
    var money =0;//åˆè®¡å¤šå°‘å…ƒ

    arr.forEach(function(v,index){
        total += v.num;
        if(v.check == true){
            buy+= v.num;
            money +=  v.num * v.price;
        }
    })

    document.getElementById("all").innerText=total;
    document.getElementById("has").innerText=buy;
    document.getElementById("allPrice").innerText= money.toFixed(2);

}

// åŠ å…¥è´­ç‰©è½¦

function add(v){
    var obj= JSON.parse(v);

   var index= carArr.findIndex(function(v){
        return v.id == obj.id;
   })

   if(index == -1){

      carArr.push( {
        "id":obj.id,
		"goodsName":obj.goodsName,
		"img":obj.img,
		"price":obj.price,
		"check":obj.check,
        "num":1
	});

   }else{
       carArr[index].num +=1;
   }

   showCar(carArr);
   count(carArr);
   localStorage.setItem("p20622am",JSON.stringify({"info":carArr}));

}

```

### 17.2  è¡¨æ ¼æ ·å¼å•†å“ç®¡ç†--åˆ†ç±»-åˆ†é¡µ-å¢åˆ -æ”¹

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./css/index.css">
</head>
<body>
    
    <div class="box">
        <!-- æ·»åŠ ä¿®æ”¹ -->
        <form  class="addEditForm">
            <div>
                <label for="">å›¾ç‰‡åœ°å€</label>
                <input type="text" id="img">
            </div>

            <div>
                <label for="">ç®€ä»‹</label>
                <input type="text" id="name">
            </div>
            <div>
                <label for="">ä»·æ ¼</label>
                <input type="text" id="price">
            </div>
            <div>
                <label for="">ç±»åˆ«</label>
                <select name="" id="type">
                    <option value="å†°ç®±">å†°ç®±</option>
                    <option value="ç”µè„‘">ç”µè„‘</option>
                    <option value="æ‰‹æœº">æ‰‹æœº </option>
                </select>
            </div>
            <div>
               
                <input type="button" value="æ·»åŠ " id="add">
                <input type="button" value="ç¡®è®¤ä¿®æ”¹" id="editOk">

            </div>
        </form>

        <div id="search">
            <button>å…¨éƒ¨</button>
            <button>å†°ç®±</button>
            <button>ç”µè„‘</button>
            <button>æ‰‹æœº</button>
        </div>

        <!-- è¡¨æ ¼å±•ç¤º -->
        <table class="showTable">
            <thead>
                <tr>
                    <th>å›¾ç‰‡</th>
                    <th>ç®€ä»‹</th>
                    <th>ä»·æ ¼</th>
                    <th>ç±»åˆ«</th>
                    <th>æ“ä½œ</th>
                </tr>
            </thead>
            <tbody id="tbody">
                <!-- <tr>
                    <td>
                        <img src="./img/bx1.jpg" alt="">
                    </td>
                    <td>aaaaaaaaaa</td>
                    <td>Â¥6777</td>
                    <td>ç”µè„‘ </td>
                    <td>
                        <span>ä¿®æ”¹</span> &emsp; &emsp;
                        <span>åˆ é™¤</span>
                    </td>
                </tr> -->
            </tbody>
        </table>

        <div class="page"> 
            <span id="total">11</span>é¡µ
            <span>ä¸Šä¸€é¡µ</span>
            <ul id="pageList">
                <li>1</li>
                <li>1</li>
                <li>1</li>
                <li>1</li>
            </ul>
            <span>ä¸‹ä¸€é¡µ</span>
        </div>

    </div>
    <script src="./js/index.js"></script>
</body>
</html>
```

```js
/*
var arr=[
    {
        "id":11,
        "img":"bx1",
        "name":"å•Šå•Šå•Šå•Šå•Šå•Š",
        "price":667,
        "type":"å†°ç®±",
    },
    {
        "id":22,
        "img":"dn1",
        "name":"å•Šå•Šå•Šå•Šå•Šå•Š222",
        "price":444,
        "type":"ç”µè„‘",
    },
    {
        "id":33,
        "img":"sj1",
        "name":"å•Šå•Šå•Šå•Šå•Šå•Š11",
        "price":666,
        "type":"æ‰‹æœº",
    }

]
*/

var arr =localStorage.getItem("p20622pm")?JSON.parse(localStorage.getItem("p20622pm")).info :[];
var limit = 3;      //æ¯é¡µæ˜¾ç¤ºæ¡æ•°
var page =1;        //å½“å‰é¡µæ•°
var total =0;       //æ€»é¡µæ•°
var type = "å…¨éƒ¨"; //ç­›é€‰ç±»å‹
var newArr=[];     //ç­›é€‰åæ•°ç»„


function $(el){
   return document.getElementById(el);
}
function $all(el){
    return document.querySelectorAll(el)
}

//æ€»é¡µæ•°
function totalFn(arr){
    total= Math.ceil(  arr.length / limit);
    $("total").innerText=total;

    var str=""
    for(var i=0;i<total;i++){
        str+=`
        <li  onclick="pageFn(${i+1})">${i+1}</li>
        `
    }
    $("pageList").innerHTML=str;

}

// ç¬¬ å‡ é¡µ

function pageFn(p){
    page= p;
    if(type == "å…¨éƒ¨"){
        show( arr.slice( (page-1)*limit ,page*limit)  ); 
    }else{
        show( newArr.slice( (page-1)*limit ,page*limit)  )
    }
    pageClass(p);
   
}
// é€‰ä¸­ åˆ†é¡µ æŒ‰é’® åŠ èƒŒæ™¯é¢œè‰²
function pageClass(p){
    
    Array.from( $all("#pageList > li") ).forEach(v=>{
        v.style.background="gray"
    })

    $all("#pageList > li")[ p-1 ].style.background="red";
}



// æ¸²æŸ“
function show(arr){
    var str="";
    arr.forEach(function(v,index){
        str+=`
        <tr>
            <td>
                <img src="./img/${v.img}.jpg" alt="">
            </td>
            <td>${v.name}</td>
            <td>Â¥${v.price}</td>
            <td>${v.type}</td>
            <td>
                <span onclick=edit(${JSON.stringify(v)}) >ä¿®æ”¹</span> &emsp; &emsp;
                <span onclick="del(${v.id})">åˆ é™¤</span>
            </td>
        </tr>
        `
    })
    document.getElementById("tbody").innerHTML=str;
  
}

window.onload=function(){
    show( arr.slice( (page-1)*limit ,page*limit)  ); // 
    totalFn(arr);
    pageClass(page);
}
// åˆ é™¤

function del(id){
    var index= arr.findIndex(v=>v.id == id);
    arr.splice(index,1);
    localStorage.setItem("p20622pm", JSON.stringify( {"info":arr}) );// å­˜
    show( arr.slice( (page-1)*limit ,page*limit)  );
    totalFn(arr);
}

// ç­›é€‰
var btnDom=document.querySelectorAll("#search >button");
for(let i=0;i<btnDom.length;i++){
  
    btnDom[i].onclick=function(){
     
        for(let j= 0;j<btnDom.length;j++){
            btnDom[j].classList.remove("active");
        }

        btnDom[i].classList.add("active");

         type= btnDom[i].innerText;
        // console.log(type);

        if( type == "å…¨éƒ¨"){
            page=1;
           

            show( arr.slice( (page-1)*limit ,page*limit)  );
            totalFn(arr);
            pageClass(page);
        }else{
          
            newArr= arr.filter(function(v){
                return v.type == type
            })
            page=1;
           
            show( newArr.slice( (page-1)*limit ,page*limit)  );
            totalFn(newArr);
            pageClass(page);
        }


    }
}

// æ·»åŠ 

$("add").onclick=function(){
    var img= $("img").value;
    var name= $("name").value;
    var price= $("price").value;
    var type= $("type").value;

    if(img && name && price  && type){
        arr.unshift({
            "id":new Date().getTime(),
            "img":img,
            "name":name,
            "price":price,
            "type":type,
        })
        show( arr.slice( (page-1)*limit ,page*limit)  );
        totalFn(arr);
        pageClass(page);
        localStorage.setItem("p20622pm", JSON.stringify( {"info":arr}) );// å­˜

    }else{
        alert("ä¸èƒ½ä¸ºç©º");
    }

}

//ä¿®æ”¹
var editIndex;
function edit(obj){
    $("editOk").style.display="block";

    $("add").style.display="none";
    // console.log(obj);
    editIndex = arr.findIndex(v=>v.id == obj.id);
    $("img").value =obj.img;
    $("name").value=obj.name;
    $("price").value=obj.price;
    $("type").value=obj.type;

}
// ç¡®è®¤ä¿®æ”¹
$("editOk").onclick=function(){
    
    var img= $("img").value;
    var name= $("name").value;
    var price= $("price").value;
    var type= $("type").value;
    arr[editIndex].img= img;
    arr[editIndex].name= name;
    arr[editIndex].price= price;
    arr[editIndex].type= type;
    show( arr.slice( (page-1)*limit ,page*limit)  );

    $("img").value ="";
    $("name").value="";
    $("price").value="";

    this.style.display="none";

    $("add").style.display="block";
    localStorage.setItem("p20622pm", JSON.stringify( {"info":arr}) );// å­˜

}

```



# 2.18

### 18.1ç©¿æ¢­æ¡†ä¹‹4æ•°ç»„æ–¹æ³•

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .box{
            display: flex;
        }
        .box >div{
            width: 200px;
            min-height: 200px;
            border: 1px solid red;
        }
    </style>
</head>
<body>
    <div class="box">
        <!-- å·¦è¾¹ -->
        <div>
            <ul id="left">
                <!-- <li>111</li> -->
            </ul>
        </div>
        <!-- ä¸­é—´ -->
        <div>
            <p id="allRight">å…¨éƒ¨å‘å³</p>
            <p id="toRight"> å‘å³ </p>
            <p id="toLeft">  å‘å·¦ </p>
            <p id="allLeft">å…¨éƒ¨å‘å·¦</p>

        </div>

        <!-- å³è¾¹ -->
        <div>
            <ul id="right">
                <!-- <li>111</li> -->
            </ul>
        </div>

    </div>
    <script src="./01.js"></script>
</body>
</html>
```

```js
var left=[
    {"id":11,"name":"aaa","age":19},
    {"id":22,"name":"bbb","age":18},
    {"id":33,"name":"ccc","age":17},
    {"id":44,"name":"eee","age":16},

];

var right=[
    {"id":55,"name":"å—·å—·","age":199},
    {"id":66,"name":"å“ˆå“ˆ","age":188},
    {"id":77,"name":"å‘µå‘µ","age":177},
    {"id":88,"name":"å“¦å“¦","age":166},
];

var leftSelect=[];
var rightSelect=[];

// æ¸²æŸ“å·¦è¾¹
function showLeft(arr){
    var str="";
    arr.forEach(function(v){
        str+=`
            <li onclick="leftSelectFn(${v.id})">${v.name} -- ${v.age} </li>
        `
    })

    document.getElementById("left").innerHTML=str;
}
// é€‰ä¸­å·¦è¾¹
function leftSelectFn(id){
    var e= event || window.event;
   var index= leftSelect.findIndex(function(v){
        return v  == id
    })
    if(index == -1){
        leftSelect.push(id);
        e.target.style.background="red";
    }else{
        leftSelect.splice(index,1);
        e.target.style.background="";
    }

    console.log(leftSelect);
 
}

//æ¸²æŸ“å³è¾¹
function showRight(arr){
    var str="";
    arr.forEach(function(v){
        str+=`
        <li onclick="rightSelectFn(${v.id})">${v.name} -- ${v.age} </li>
        `
    })

    document.getElementById("right").innerHTML=str;
}

//é€‰ä¸­å³è¾¹
function rightSelectFn(id){
    var e= event || window.event;
   var index= rightSelect.findIndex(function(v){
        return v  == id
    })
    if(index == -1){
        rightSelect.push(id);
        e.target.style.background="red";
    }else{
        rightSelect.splice(index,1);
        e.target.style.background="";
    }

    console.log(rightSelect);
 
}

window.onload=function(){
    showLeft(left)
    showRight(right)
}

var toRightDom=document.getElementById("toRight");
    toRightDom.onclick=function(){
        // æ ¹æ®å·¦è¾¹ é€‰ä¸­ çš„ æ•°ç»„ leftSelect=ã€11ï¼Œ22ï¼Œ33ã€‘
        //                                 id id id
        // å¾ªç¯ è¿™ä¸ª  leftSelect é€šè¿‡ id æ‰¾åˆ° index ï¼Œ right.push(  left[index] )

        leftSelect.forEach(function(v){
            var index = left.findIndex(function(value){
                return value.id == v
            })

            right.push( left[index] );

            left.splice(index,1);
        })

        showLeft(left)
        showRight(right)
        leftSelect=[];
        rightSelect=[];
    }

var toLeftDom=document.getElementById("toLeft");
toLeftDom.onclick=function(){
        // æ ¹æ®å·¦è¾¹ é€‰ä¸­ çš„ æ•°ç»„ leftSelect=ã€11ï¼Œ22ï¼Œ33ã€‘
        //                                 id id id
        // å¾ªç¯ è¿™ä¸ª  leftSelect é€šè¿‡ id æ‰¾åˆ° index ï¼Œ right.push(  left[index] )

        rightSelect.forEach(function(v){
            var index = right.findIndex(function(value){
                return value.id == v
            })

            left.push( right[index] );

            right.splice(index,1);
        })

        showLeft(left)
        showRight(right)
        leftSelect=[];
        rightSelect=[];
    }

var allRightDom=document.getElementById("allRight");
    allRightDom.onclick=function(){
        var n= right.concat(left);
        right= n;
        left =[];
        showLeft(left)
        showRight(right)
    }

var allLeftDom=document.getElementById("allLeft");
    allLeftDom.onclick=function(){
        var n= left.concat(right);
        left= n;
        right =[];

        showLeft(left)
        showRight(right)

    }
```

